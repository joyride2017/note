<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Python Basics: Numpy &amp; Pandas | Data Science</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="python" />
  
  
  
  
  <meta name="description" content="Numpy, Pandas">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Basics: Numpy &amp; Pandas">
<meta property="og:url" content="https://joyride2017.github.io/note/2017/09/08/python-basics/index.html">
<meta property="og:site_name" content="Data Science">
<meta property="og:description" content="Numpy, Pandas">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-40.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-74.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-83.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-84.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-86.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-28.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-29.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-82.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-78.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-77.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-01.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-02.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-03.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-04.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-05.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-06.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-07.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-08.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-39.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-09.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-89.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-90.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-91.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-95.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-97.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-10.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-11.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-12.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-14.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-15.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-48.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-49.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-99.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-50.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-54.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-58.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-60.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-88.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-55.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-93.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-19.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-20.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-61.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-62.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-64.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-92.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-100.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-71.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-72.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-21.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-80.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-81.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-24.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-36.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-37.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-38.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic34.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic35.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-59.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-26.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-27.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-30.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-31.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-32.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-75.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-76.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-87.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-33.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-103.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-104.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-45.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-69.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-98.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-43.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-44.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-41.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-42.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-79.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-46.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-47.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-101.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-65.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-73.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-67.png">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-68.png">
<meta property="og:image" content="https://stackoverflow.com/questions/38981257/color-3d-surface-based-on-categories-that-passes-through-scatter-points">
<meta property="og:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-102.png">
<meta property="og:updated_time" content="2017-11-29T16:07:34.891Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python Basics: Numpy &amp; Pandas">
<meta name="twitter:description" content="Numpy, Pandas">
<meta name="twitter:image" content="https://joyride2017.github.io/note/2017/09/08/python-basics/p-basic-40.png">
  
  <link rel="icon" href="/note/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/note/css/style.css">

  <script src="/note/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/note/css/bootstrap.css" >
  <link rel="stylesheet" href="/note/css/fashion.css" >
  <link rel="stylesheet" href="/note/css/glyphs.css" ><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


<!-- hexo-inject:begin --><!-- hexo-inject:end --><header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/note/" title="Data Science" rel="home"> Data Science </a>
            
          </h1>
          
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/note/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/note/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/note/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/note/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/note/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-python-basics" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Python Basics: Numpy &amp; Pandas
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/note/2017/09/08/python-basics/" class="article-date">
	  <time datetime="2017-09-08T21:13:22.000Z" itemprop="datePublished">September 8, 2017</time>
	</a>

       
      
	<span id="busuanzi_container_page_pv">
	  VIEWS<span id="busuanzi_value_page_pv"></span> TIMES
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span>$$\alpha \beta \gamma$$</span><!-- Has MathJax -->
<h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><h2 id="Library"><a href="#Library" class="headerlink" title="Library"></a>Library</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="comment"># -- matplotlib (1)</span></div><div class="line"><span class="keyword">import</span> matplotlib</div><div class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="comment"># import matplotlib.pyplot as plt #! also works</span></div><div class="line"><span class="comment"># -- pandas (2)</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"><span class="comment"># -- numpy (3)</span></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> linspace, sin</div><div class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randn</div><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choices</div><div class="line">np.random.seed(<span class="number">12321</span>)</div><div class="line"><span class="comment"># np.set_printoptions(precision=4) #</span></div><div class="line"><span class="comment"># -- Jupyter</span></div><div class="line"><span class="comment"># plt.rc('figure', figsize=(10, 6)) # used in Jupyter</span></div></pre></td></tr></table></figure>
<h2 id="Standard-output"><a href="#Standard-output" class="headerlink" title="Standard output"></a>Standard output</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">sys.stdout = open(<span class="string">'log.txt'</span>, <span class="string">'w'</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">'Write this to file.'</span></div></pre></td></tr></table></figure>
<p>Close the file when you are done writing: sys.stdout.close()</p>
<h2 id="Working-directory"><a href="#Working-directory" class="headerlink" title="Working directory"></a>Working directory</h2><p>OS here refers to the Windows operating system. Jupyter refers to Jupyter Notebook, a web-based application on server-client structure allowing users to create and manipulate .pynb file and execute it through an internet browser.</p>
<h3 id="Change-current-directory"><a href="#Change-current-directory" class="headerlink" title="Change current directory"></a>Change current directory</h3><p>To get the full path to the directory a Python file is contained in, write this in that file:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line">cwd = os.getcwd()</div></pre></td></tr></table></figure></p>
<p>Documentation references for the modules, constants and functions used above:</p>
<ul>
<li>The <code>os</code> and <code>os.path</code> modules.</li>
<li><code>os.getcwd()</code> (returns “a string representing the current working directory”)</li>
<li><code>os.chdir(&quot;C:/path/to/location&quot;)</code> (“change the current working directory to path”)</li>
</ul>
<p><strong>Use a context manager to change the working directory</strong> Note that changing the current working directory in a subprocess (such as <code>os.chdir(path)</code>) does not change the current working directory in the parent process. This is true of the Python interpreter as well. You cannot use os.chdir() to change the CWD of the calling process. Instead use a context manager and with statement for this task:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">cd</span>:</span></div><div class="line">    <span class="string">"""Context manager for changing the current working directory"""</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, newPath)</span>:</span></div><div class="line">        self.newPath = os.path.expanduser(newPath)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></div><div class="line">        self.savedPath = os.getcwd()</div><div class="line">        os.chdir(self.newPath)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, etype, value, traceback)</span>:</span></div><div class="line">        os.chdir(self.savedPath)</div></pre></td></tr></table></figure></p>
<p>Example:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> subprocess <span class="comment"># just to call an arbitrary command e.g. 'ls'</span></div><div class="line"></div><div class="line"><span class="comment"># enter the directory like this:</span></div><div class="line"><span class="keyword">with</span> cd(<span class="string">"~/Library"</span>):</div><div class="line">   <span class="comment"># we are in ~/Library</span></div><div class="line">   subprocess.call(<span class="string">"ls"</span>)</div><div class="line"></div><div class="line"><span class="comment"># outside the context manager we are back wherever we started.</span></div></pre></td></tr></table></figure></p>
<h2 id="IDE-for-python"><a href="#IDE-for-python" class="headerlink" title="IDE for python"></a>IDE for python</h2><h3 id="Spyder"><a href="#Spyder" class="headerlink" title="Spyder"></a>Spyder</h3><h4 id="Clear-all-variables-in-Spyder"><a href="#Clear-all-variables-in-Spyder" class="headerlink" title="Clear all variables in Spyder"></a>Clear all variables in Spyder</h4><p>Simply type <code>%reset</code>. For removing a particular variable <code>bar</code>, use <code>del bar</code>.</p>
<h4 id="Autocompletion-amp-search"><a href="#Autocompletion-amp-search" class="headerlink" title="Autocompletion &amp; search"></a>Autocompletion &amp; search</h4><p><strong>Tab.</strong> Python shell is tab completion, a feature common to most interactive data analysis environments. While entering expressions in the shell, pressing <code>&lt;Tab&gt;</code> will search the namespace for any variables (objects, functions, etc.) matching the characters you have typed so far.</p>
<p><strong>Question Mark.</strong> Using a question mark (?) before or after a variable will display some general information about the object. This is referred to as <code>object introspection</code>.</p>
<p><strong>Wildcard.</strong> A number of characters combined with the wildcard <code>(*)</code> will show all names matching the wildcard expression. For example, we could get a list of <code>all functions in the top level NumPy namespace</code> containing <code>load</code><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ np.*load*?</div></pre></td></tr></table></figure></p>
<h3 id="Jupyter"><a href="#Jupyter" class="headerlink" title="Jupyter"></a>Jupyter</h3><h4 id="Execute-code-from-the-clipboard"><a href="#Execute-code-from-the-clipboard" class="headerlink" title="Execute code from the clipboard"></a>Execute code from the clipboard</h4><p>Jupyter command <code>%cpaste</code> takes whatever text is in the clipboard and executes it as a single block in the shell.</p>
<h4 id="Dos-mode"><a href="#Dos-mode" class="headerlink" title="Dos mode"></a>Dos mode</h4><p><code>!cmd</code> execute cmd in the system shell and <code>%pwd</code> returns the current system working directory in Jupyter Notebook.</p>
<h4 id="Timing-the-runtime"><a href="#Timing-the-runtime" class="headerlink" title="Timing the runtime"></a>Timing the runtime</h4><p>Timing code by hand using the built-in time module and its functions <code>time.clock</code> and<br><code>time.time</code> is often tedious and repetitive:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Given an arbitrary statement, this method has a heuristic to run a statement multiple times to produce an average runtime.</span></div><div class="line"><span class="keyword">import</span> time</div><div class="line">start = time.time()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(iterations):</div><div class="line">    <span class="comment"># some code to run here</span></div><div class="line">elapsed_per = (time.time() - start) / iterations</div></pre></td></tr></table></figure></p>
<p>Otherwise, in Jupyter Notebook, two magic functions can automate the process for you: <code>%time</code> and <code>%timeit</code>.</p>
<h2 id="Basic-data-structure"><a href="#Basic-data-structure" class="headerlink" title="Basic data structure"></a>Basic data structure</h2><h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h3><p>Reference <a href="https://developers.google.com/edu/python/lists#list-methods" target="_blank" rel="external">Google</a></p>
<h4 id="List-of-floating-point-number"><a href="#List-of-floating-point-number" class="headerlink" title="List of floating point number"></a>List of floating point number</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#method 1 by for loop</span></div><div class="line">list1 = [x/<span class="number">10.0</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>,<span class="number">100</span>,<span class="number">15</span>)] <span class="comment"># [0.5, 2.0, 3.5, 5.0, 6.5, 8.0, 9.5]</span></div><div class="line">print(len(list1),sum(list1)) <span class="comment"># 7 35.0</span></div><div class="line"></div><div class="line"><span class="comment"># method 2 by map</span></div><div class="line">list2 = map(<span class="keyword">lambda</span> x: x/<span class="number">10.0</span>, range(<span class="number">5</span>,<span class="number">100</span>,<span class="number">15</span>))</div><div class="line">list2 <span class="comment"># not a list yet</span></div><div class="line">list(list2) <span class="comment"># [0.5, 2.0, 3.5, 5.0, 6.5, 8.0, 9.5]</span></div><div class="line"></div><div class="line"><span class="comment"># method 3 by generator</span></div><div class="line"><span class="keyword">import</span> decimal</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">frange</span><span class="params">(x,y,step)</span>:</span></div><div class="line">  <span class="keyword">while</span> x&lt;y:</div><div class="line">    <span class="keyword">yield</span> x</div><div class="line">    x += step</div><div class="line">list(frange(<span class="number">0.5</span>,<span class="number">10.0</span>,<span class="number">1.5</span>)) <span class="comment"># [0.5, 2.0, 3.5, 5.0, 6.5, 8.0, 9.5]</span></div></pre></td></tr></table></figure>
<h4 id="Read-list"><a href="#Read-list" class="headerlink" title="Read    list"></a>Read    list</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># element</span></div><div class="line">x = range(<span class="number">10</span>) <span class="comment"># is the list [0, 1, ..., 9]</span></div><div class="line">zero  = x[<span class="number">0</span>]  <span class="comment"># equals 0, lists are 0-indexed</span></div><div class="line">one   = x[<span class="number">1</span>]  <span class="comment"># equals 1</span></div><div class="line">nine  = x[<span class="number">-1</span>] <span class="comment"># equals 9, 'Pythonic' for last element</span></div><div class="line">eight = x[<span class="number">-2</span>] <span class="comment"># equals 8, 'Pythonic' for next-to-last element</span></div><div class="line">x[<span class="number">0</span>]  = <span class="number">-1</span>    <span class="comment"># now x is [-1, 1, 2, 3, ..., 9]</span></div><div class="line"></div><div class="line"><span class="comment"># segment</span></div><div class="line">first_three  = x[:<span class="number">3</span>]              <span class="comment"># [-1, 1, 2]</span></div><div class="line">three_to_end = x[<span class="number">3</span>:]              <span class="comment"># [3, 4, ..., 9]</span></div><div class="line">one_to_four  = x[<span class="number">1</span>:<span class="number">5</span>]             <span class="comment"># [1, 2, 3, 4]</span></div><div class="line">last_three   = x[<span class="number">-3</span>:]             <span class="comment"># [7, 8, 9]</span></div><div class="line">without_first_and_last = x[<span class="number">1</span>:<span class="number">-1</span>]  <span class="comment"># [1, 2, ..., 8]</span></div><div class="line">copy_of_x    = x[:]               <span class="comment"># [-1, 1, 2, ..., 9]</span></div></pre></td></tr></table></figure>
<h4 id="Membership-in-list"><a href="#Membership-in-list" class="headerlink" title="Membership in list"></a>Membership in list</h4><p>Pythons has an in operator to check for list membership and a list can be concatenate with other lists.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]    <span class="comment"># True</span></div><div class="line"><span class="number">0</span> <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]    <span class="comment"># False</span></div><div class="line"></div><div class="line"><span class="comment"># extend with a list</span></div><div class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">x.extend([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]) <span class="comment"># x is now [1,2,3,4,5,6]</span></div><div class="line"></div><div class="line"><span class="comment"># append with an element</span></div><div class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">x.append(<span class="number">0</span>)       <span class="comment"># x is now [1, 2, 3, 0]</span></div><div class="line">y = x[<span class="number">-1</span>]         <span class="comment"># refers to the last one. equals 0</span></div><div class="line">z = len(x)        <span class="comment"># equals 4</span></div></pre></td></tr></table></figure></p>
<h4 id="Get-the-index-of-a-cell"><a href="#Get-the-index-of-a-cell" class="headerlink" title="Get the index of a cell"></a>Get the index of a cell</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x = random.sample(range(<span class="number">100</span>),<span class="number">10</span>)</div><div class="line">x <span class="comment"># [53, 85, 47, 88, 57, 99, 52, 81, 61, 38]</span></div><div class="line">x.index(<span class="number">88</span>) <span class="comment"># 3</span></div></pre></td></tr></table></figure>
<h4 id="Get-the-index-of-matched-item-from-a-list"><a href="#Get-the-index-of-matched-item-from-a-list" class="headerlink" title="Get the index of matched item from a list"></a>Get the index of matched item from a list</h4><p>Reference: <a href="https://stackoverflow.com/questions/32061786/get-the-index-of-the-exact-match-from-a-list" target="_blank" rel="external">stackoverflow</a></p>
<h4 id="Unpack-list"><a href="#Unpack-list" class="headerlink" title="Unpack list"></a>Unpack list</h4><p>It is often convenient to unpack lists if you know how many elements they contain:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">x, y = [<span class="number">1</span>, <span class="number">2</span>] <span class="comment"># now x is 1, y is 2</span></div><div class="line"></div><div class="line"><span class="comment"># It’s common to use an underscore for a value you’re going to throw away:</span></div><div class="line">_, y = [<span class="number">1</span>, <span class="number">2</span>] <span class="comment"># now y == 2, didn't care about the first element</span></div></pre></td></tr></table></figure></p>
<h4 id="Concatenation"><a href="#Concatenation" class="headerlink" title="Concatenation"></a>Concatenation</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">a = list(range(<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>)) <span class="comment"># [1,2]</span></div><div class="line">b = list(range(<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>)) <span class="comment"># [2,4]</span></div><div class="line"><span class="comment"># method 1</span></div><div class="line">c = a + b</div><div class="line">c <span class="comment"># [1, 2, 2, 4]</span></div><div class="line"></div><div class="line"><span class="comment"># method 2</span></div><div class="line"><span class="keyword">import</span> itertools</div><div class="line">d = itertools.chain(a,b)</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> d:</div><div class="line">  print(i)</div></pre></td></tr></table></figure>
<p><img src="p-basic-40.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 3 -- easiest</span></div><div class="line"><span class="comment"># You can use `sum` if you give it a `start` argument</span></div><div class="line">e = sum([a,b],[])</div><div class="line">e <span class="comment"># [1, 2, 2, 4]</span></div><div class="line"></div><div class="line"><span class="comment"># method 4 -- pythonic</span></div><div class="line"><span class="keyword">import</span> operator</div><div class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</div><div class="line">reduce(operator.add, [a,b]) <span class="comment"># [1, 2, 2, 4]</span></div></pre></td></tr></table></figure>
<h4 id="Combine-list-elements"><a href="#Combine-list-elements" class="headerlink" title="Combine list elements"></a>Combine list elements</h4><p>Generate a list of pairs consisting of combinations of a set of letters = ‘A’, ‘B’, ‘C’ with a set of numbers = 1, 2 such that we have:</p>
<ol>
<li>A1 B2</li>
<li>B1 A2</li>
<li>A1 C2</li>
<li>C1 A2</li>
<li>B1 C2</li>
<li>C1 B2</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> itertools</div><div class="line">list1 = [<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>]</div><div class="line">list2 = [<span class="number">1</span>,<span class="number">2</span>]</div><div class="line">result = [zip(x,list2) <span class="keyword">for</span> x <span class="keyword">in</span> itertools.permutations(list1,len(list2))]</div></pre></td></tr></table></figure>
<p><img src="p-basic-74.png" alt=""></p>
<p>For a simple Cartesian product:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> itertools</div><div class="line">list1 = [<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>]</div><div class="line">list2 = [<span class="number">1</span>,<span class="number">2</span>]</div><div class="line">result = list(itertools.product(list1,list2))</div><div class="line">result <span class="comment"># [('A', 1), ('A', 2), ('B', 1), ('B', 2), ('C', 1), ('C', 2)]</span></div></pre></td></tr></table></figure></p>
<h4 id="Dictionary-of-Lists"><a href="#Dictionary-of-Lists" class="headerlink" title="Dictionary of Lists"></a>Dictionary of Lists</h4><p><a href="https://stackoverflow.com/questions/27770836/python-dictionary-of-lists" target="_blank" rel="external">stackoverflow</a></p>
<h4 id="Index-of-an-list-item"><a href="#Index-of-an-list-item" class="headerlink" title="Index of an list item"></a>Index of an list item</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">ans = result.index((<span class="string">'A'</span>,<span class="number">1</span>)) <span class="comment"># returns index 0.</span></div></pre></td></tr></table></figure>
<h4 id="Unzip-a-list"><a href="#Unzip-a-list" class="headerlink" title="Unzip a list"></a>Unzip a list</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">result = zip(*result)</div><div class="line">result <span class="comment"># [('A', 'A', 'B', 'B', 'C', 'C'), (1, 2, 1, 2, 1, 2)]</span></div></pre></td></tr></table></figure>
<h4 id="Split-into-equal-chunks"><a href="#Split-into-equal-chunks" class="headerlink" title="Split into equal chunks"></a>Split into equal chunks</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">chunks</span><span class="params">(l, n)</span>:</span></div><div class="line">    <span class="string">"""Yield successive n-sized chunks from l."""</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(l), n):</div><div class="line">        <span class="keyword">yield</span> l[i:i + n]</div><div class="line"><span class="keyword">import</span> pprint</div><div class="line">pprint.pprint(list(chunks(range(<span class="number">10</span>, <span class="number">75</span>), <span class="number">10</span>)))</div></pre></td></tr></table></figure>
<p><img src="p-basic-83.png" alt=""><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># Simply use list comprehension instead of writing a function.</span></div><div class="line">l = np.arange(<span class="number">10</span>,<span class="number">75</span>)</div><div class="line">n = <span class="number">10</span></div><div class="line">[l[i:i + n] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(l), n)]</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-84.png" alt=""></p>
<h4 id="Clong-rows-and-columns"><a href="#Clong-rows-and-columns" class="headerlink" title="Clong rows and columns"></a>Clong rows and columns</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 1 efficient one.</span></div><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> tile, array, matrix</div><div class="line">tile(array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]),(<span class="number">3</span>,<span class="number">1</span>))</div><div class="line">tile(array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]]).transpose(),(<span class="number">1</span>,<span class="number">3</span>))</div></pre></td></tr></table></figure>
<p><img src="p-basic-86.png" alt=""><br>Note that the transpose has no effect for an array but a matrix.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> tile, array, matrix</div><div class="line">x = array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</div><div class="line">x.transpose() <span class="comment"># array([1, 2, 3]), which is the same as the original.</span></div><div class="line">matrix([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment"># matrix([[1, 2, 3]])</span></div><div class="line">matrix([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]).transpose</div></pre></td></tr></table></figure></p>
<h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><p>Strings    can    be delimited by single or double quotation marks (but the quotes have to match):<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">single_quoted_string = <span class="string">'data science'</span></div><div class="line">double_quoted_string = <span class="string">"data science"</span></div></pre></td></tr></table></figure></p>
<p>Python uses backslashes to encode special characters.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tab_string = <span class="string">"\t"</span>       <span class="comment"># represents the tab character</span></div><div class="line">len(tab_string)         <span class="comment"># is 1</span></div></pre></td></tr></table></figure></p>
<p>If you want backslashes as backslashes (which you might in Windows directory names or in regular expressions), you can create raw strings using r””:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">not_tab_string = <span class="string">r"\t"</span>  <span class="comment"># represents the characters '\' and 't'</span></div><div class="line">len(not_tab_string)     <span class="comment"># is 2</span></div></pre></td></tr></table></figure></p>
<p>You can create multiline strings using triple-double-quotes:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">multi_line_string = <span class="string">"""This is the first line.</span></div><div class="line"><span class="string">and this is the second line</span></div><div class="line"><span class="string">and this is the third line"""</span></div></pre></td></tr></table></figure></p>
<h3 id="Tuples"><a href="#Tuples" class="headerlink" title="Tuples"></a>Tuples</h3><p>Tuples are lists’ immutable cousins. Pretty much anything you can do to a list that doesn’t involve modifying it, you can do to a tuple. You specify a tuple by using parentheses (or nothing) instead of square brackets:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>]</div><div class="line">my_tuple = (<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">other_tuple = <span class="number">3</span>, <span class="number">4</span></div><div class="line">my_list[<span class="number">1</span>] = <span class="number">3</span>      <span class="comment"># my_list is now [1, 3]</span></div><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    my_tuple[<span class="number">1</span>] = <span class="number">3</span></div><div class="line"><span class="keyword">except</span> TypeError:</div><div class="line">    <span class="keyword">print</span> <span class="string">"cannot modify a tuple"</span></div></pre></td></tr></table></figure></p>
<p>Tuples are a convenient way to return multiple values from functions:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_and_product</span><span class="params">(x, y)</span>:</span></div><div class="line">    <span class="keyword">return</span> (x + y),(x * y)</div><div class="line">sp = sum_and_product(<span class="number">2</span>, <span class="number">3</span>)    <span class="comment"># equals (5, 6)</span></div><div class="line">s, p = sum_and_product(<span class="number">5</span>, <span class="number">10</span>) <span class="comment"># s is 15, p is 50</span></div><div class="line">print(s,p)</div></pre></td></tr></table></figure></p>
<p>Tuples (and lists) can also be used for multiple assignment:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x, y = <span class="number">1</span>, <span class="number">2</span>     <span class="comment"># now x is 1, y is 2</span></div><div class="line">x, y = y, x     <span class="comment"># Pythonic way to swap variables; now x is 2, y is 1</span></div></pre></td></tr></table></figure></p>
<h3 id="Dictionaries"><a href="#Dictionaries" class="headerlink" title="Dictionaries"></a>Dictionaries</h3><h4 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h4><p>Another    fundamental    data structure is a dictionary, which associates values with keys and allows you to quickly retrieve the value corresponding to a given key:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">empty_dict = &#123;&#125;               <span class="comment"># Pythonic</span></div><div class="line">empty_dict2 = dict()              <span class="comment"># less Pythonic</span></div><div class="line">grades = &#123; <span class="string">"Joel"</span> : <span class="number">80</span>, <span class="string">"Tim"</span> : <span class="number">95</span> &#125;    <span class="comment"># dictionary literal</span></div><div class="line"></div><div class="line">joels_grade = grades[<span class="string">"Joel"</span>]         <span class="comment"># equals 80</span></div><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    kates_grade = grades[<span class="string">"Kate"</span>]</div><div class="line"><span class="keyword">except</span> KeyError:</div><div class="line">    <span class="keyword">print</span> <span class="string">"no grade for Kate!"</span></div></pre></td></tr></table></figure></p>
<p>You can check for the existence of a key using in:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">joel_has_grade = <span class="string">"Joel"</span> <span class="keyword">in</span> grades     <span class="comment"># True</span></div><div class="line">kate_has_grade = <span class="string">"Kate"</span> <span class="keyword">in</span> grades     <span class="comment"># False</span></div></pre></td></tr></table></figure></p>
<p>Dictionaries have a get method that returns a default value (instead of raising an exception) when you look up a key that’s not in the dictionary:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">joels_grade = grades.get(<span class="string">"Joel"</span>, <span class="number">0</span>)  <span class="comment"># equals 80</span></div><div class="line">kates_grade = grades.get(<span class="string">"Kate"</span>, <span class="number">0</span>)  <span class="comment"># equals 0</span></div><div class="line">no_ones_grade = grades.get(<span class="string">"No One"</span>)  <span class="comment"># default default is None</span></div></pre></td></tr></table></figure></p>
<p>You assign key-value pairs using the same square brackets:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">grades[<span class="string">"Tim"</span>] = <span class="number">99</span>         <span class="comment"># replaces the old value</span></div><div class="line">grades[<span class="string">"Kate"</span>] = <span class="number">100</span>        <span class="comment"># adds a third entry</span></div><div class="line">num_students = len(grades)     <span class="comment"># equals 3</span></div></pre></td></tr></table></figure></p>
<p>We use dictionaries as a simple way to represent structured data:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">tweet = &#123;</div><div class="line">    <span class="string">"user"</span> : <span class="string">"joelgrus"</span>,</div><div class="line">    <span class="string">"text"</span> : <span class="string">"Data Science is Awesome"</span>,</div><div class="line">    <span class="string">"retweet_count"</span> : <span class="number">100</span>,</div><div class="line">    <span class="string">"hashtags"</span> : [<span class="string">"#data"</span>, <span class="string">"#science"</span>, <span class="string">"#datascience"</span>, <span class="string">"#awesome"</span>, <span class="string">"#yolo"</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line">tweet_keys  = tweet.keys()    <span class="comment"># list of keys</span></div><div class="line">tweet_values = tweet.values()   <span class="comment"># list of values</span></div><div class="line">tweet_items  = tweet.items()    <span class="comment"># list of (key, value) tuples</span></div><div class="line"><span class="string">"user"</span> <span class="keyword">in</span> tweet_keys       <span class="comment"># True, but uses a slow list in</span></div><div class="line"><span class="string">"user"</span> <span class="keyword">in</span> tweet          <span class="comment"># more Pythonic, uses faster dict in</span></div><div class="line"><span class="string">"joelgrus"</span> <span class="keyword">in</span> tweet_values    <span class="comment"># True</span></div></pre></td></tr></table></figure></p>
<h4 id="Task-word-counts-in-article"><a href="#Task-word-counts-in-article" class="headerlink" title="Task: word counts in article"></a>Task: word counts in article</h4><p>As you check each word, you can increment its count if it’s already in the dictionary and add it to the dictionary if it’s not:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Method 1</span></div><div class="line">word_counts = &#123;&#125;</div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> document:</div><div class="line">    <span class="keyword">if</span> word <span class="keyword">in</span> word_counts:</div><div class="line">        word_counts[word] += <span class="number">1</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line"><span class="comment"># Method 2</span></div><div class="line">word_counts = &#123;&#125;</div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> document:</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        word_counts[word] += <span class="number">1</span></div><div class="line">    <span class="keyword">except</span> KeyError:</div><div class="line">        word_counts[word] = <span class="number">1</span></div><div class="line"><span class="comment"># Method 3</span></div><div class="line">word_counts = &#123;&#125;</div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> document:</div><div class="line">    previous_count = word_counts.get(word, <span class="number">0</span>)</div><div class="line">    word_counts[word] = previous_count + <span class="number">1</span></div></pre></td></tr></table></figure></p>
<p>A defaultdict is like a regular dictionary, except that when you try to look up a key it doesn’t contain, it first adds a value for it using a zero-argument function you provided when you created it.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Method 4</span></div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</div><div class="line">word_counts = defaultdict(int)  <span class="comment"># int() produces 0</span></div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> document:</div><div class="line">    word_counts[word] += <span class="number">1</span></div></pre></td></tr></table></figure></p>
<p>Defaultdict can also be useful with list or dict or even your own functions:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dd_list = defaultdict(list)    <span class="comment"># list() produces an empty list</span></div><div class="line">dd_list[<span class="number">2</span>].append(<span class="number">1</span>)       <span class="comment"># now dd_list contains &#123;2: [1]&#125;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dd_dict = defaultdict(dict)       <span class="comment"># dict() produces an empty dict</span></div><div class="line">dd_dict[<span class="string">"Joel"</span>][<span class="string">"City"</span>] = <span class="string">"Seattle"</span>   <span class="comment"># &#123; "Joel" : &#123; "City" : Seattle"&#125;&#125;</span></div></pre></td></tr></table></figure>
<p>These will be useful when we’re using dictionaries to “collect” results by some key and don’t want to have to check every time to see if the key exists yet.<br>A Counter turns a sequence of values into a defaultdict(int)-like object mapping keys to counts. We will primarily use it to create histograms:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</div><div class="line">c = Counter([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>])          <span class="comment"># c is (basically) &#123; 0 : 2, 1 : 1, 2 : 1 &#125;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Method 5: to solve our word_counts problem above</span></div><div class="line">word_counts = Counter(document)</div><div class="line"><span class="comment"># print the 10 most common words and their counts</span></div><div class="line"><span class="keyword">for</span> word, count <span class="keyword">in</span> word_counts.most_common(<span class="number">10</span>):</div><div class="line">    <span class="keyword">print</span> word, count</div></pre></td></tr></table></figure>
<h4 id="Task-nested-dictionary"><a href="#Task-nested-dictionary" class="headerlink" title="Task: nested dictionary"></a>Task: nested dictionary</h4><p>Reference: <a href="https://stackoverflow.com/questions/30360964/how-to-store-multiple-entries-for-each-student-using-dictionaries" target="_blank" rel="external">stackoverflow</a></p>
<p>Create a file with students, each record having name of student, percent marks obtained in different subjects such as Maths, Physics and Chemistry, which may look like:<br><img src="p-basic-28.png" alt=""><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">num_students = int(input(<span class="string">"Please enter number of students:"</span>))</div><div class="line">print(<span class="string">"you entered &#123;&#125; students"</span>.format(num_students))</div><div class="line">student_info = &#123;&#125;</div><div class="line">student_data = [<span class="string">'Math marks : '</span>, <span class="string">'Physics marks : '</span>, <span class="string">'Chemistry marks : '</span>]</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,num_students):</div><div class="line">    student_name = input(<span class="string">"Name :"</span>)</div><div class="line">    student_info[student_name] = &#123;&#125;</div><div class="line">    <span class="keyword">for</span> entry <span class="keyword">in</span> student_data:</div><div class="line">        student_info[student_name][entry] = int(input(entry)) <span class="comment">#storing the marks entered as integers to perform arithmetic operations later on.</span></div><div class="line"><span class="comment">#print student_info</span></div><div class="line">print(<span class="string">"Please enter student name ?"</span>)</div><div class="line">name = input(<span class="string">"Student name : "</span>)</div><div class="line"><span class="keyword">if</span> name <span class="keyword">in</span> student_info.keys():</div><div class="line">    print(<span class="string">"Average student marks : &#123;&#125;"</span>.format(sum(student_info[name].values())/<span class="number">3.0</span>))</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span><span class="string">"please enter valid name"</span></div></pre></td></tr></table></figure></p>
<p>To print the newly created dictionary student_info:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">pretty</span><span class="params">(d, indent=<span class="number">0</span>)</span>:</span></div><div class="line">   <span class="keyword">for</span> key, value <span class="keyword">in</span> d.items():</div><div class="line">      print(<span class="string">'\t'</span> * indent + str(key))</div><div class="line">      <span class="keyword">if</span> isinstance(value, dict):</div><div class="line">         pretty(value, indent+<span class="number">1</span>)</div><div class="line">      <span class="keyword">else</span>:</div><div class="line">         print(<span class="string">'\t'</span> * (indent+<span class="number">1</span>) + str(value))</div><div class="line"></div><div class="line">pretty(student_info)</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-29.png" alt=""></p>
<h4 id="Return-multiple-dataframe-using-Dictionary"><a href="#Return-multiple-dataframe-using-Dictionary" class="headerlink" title="Return multiple dataframe using Dictionary"></a>Return multiple dataframe using Dictionary</h4><p><a href="https://stackoverflow.com/questions/45319422/return-multiple-dataframes-from-a-function-with-pandas" target="_blank" rel="external">stackoverflow</a></p>
<h3 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h3><h4 id="Basics-1"><a href="#Basics-1" class="headerlink" title="Basics"></a>Basics</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">s = set()</div><div class="line">s.add(<span class="number">1</span>)      <span class="comment"># s is now &#123; 1 &#125;</span></div><div class="line">s.add(<span class="number">2</span>)      <span class="comment"># s is now &#123; 1, 2 &#125;</span></div><div class="line">s.add(<span class="number">2</span>)      <span class="comment"># s is still &#123; 1, 2 &#125;</span></div><div class="line">x = len(s)     <span class="comment"># equals 2</span></div><div class="line">y = <span class="number">2</span> <span class="keyword">in</span> s     <span class="comment"># equals True</span></div><div class="line">z = <span class="number">3</span> <span class="keyword">in</span> s     <span class="comment"># equals False</span></div></pre></td></tr></table></figure>
<h4 id="Check-membership"><a href="#Check-membership" class="headerlink" title="Check membership"></a>Check membership</h4><p>We’ll use sets for two main reasons. The first is that in is a very fast operation on sets. If we have a large collection of items that we want to use for a membership test, a set is more appropriate than a list:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">stopwords_list = [<span class="string">"a"</span>,<span class="string">"an"</span>,<span class="string">"at"</span>] + hundreds_of_other_words + [<span class="string">"yet"</span>, <span class="string">"you"</span>]</div><div class="line"><span class="string">"zip"</span> <span class="keyword">in</span> stopwords_list     <span class="comment"># False, but have to check every element</span></div><div class="line">stopwords_set = set(stopwords_list)</div><div class="line"><span class="string">"zip"</span> <span class="keyword">in</span> stopwords_set      <span class="comment"># very fast to check</span></div></pre></td></tr></table></figure></p>
<p>The second reason is to find the distinct items in a collection:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">item_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">num_items = len(item_list)           <span class="comment"># 6</span></div><div class="line">item_set = set(item_list)            <span class="comment"># &#123;1, 2, 3&#125;</span></div><div class="line">num_distinct_items = len(item_set)   <span class="comment"># 3</span></div><div class="line">distinct_item_list = list(item_set)  <span class="comment"># [1, 2, 3]</span></div></pre></td></tr></table></figure></p>
<h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><h4 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate"></a>enumerate</h4><p>When indexing data, a useful pattern that uses enumerate is computing a dict mapping the values of a sequence (which are assumed to be unique) to their locations in the sequence:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">some_list = [<span class="string">'foo'</span>,<span class="string">'bar'</span>,<span class="string">'baz'</span>]</div><div class="line">mapping = dict((v,i) <span class="keyword">for</span> i, v <span class="keyword">in</span> enumerate(some_list))</div><div class="line">mapping <span class="comment"># &#123;'bar': 1, 'baz': 2, 'foo': 0&#125;</span></div></pre></td></tr></table></figure></p>
<h4 id="sorted"><a href="#sorted" class="headerlink" title="sorted"></a>sorted</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sorted([<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>]) <span class="comment"># [0, 1, 2, 2, 3, 6, 7]</span></div><div class="line">sorted(<span class="string">'horse race'</span>) <span class="comment"># [' ', 'a', 'c', 'e', 'e', 'h', 'o', 'r', 'r', 's']</span></div></pre></td></tr></table></figure>
<p>A common pattern for getting a sorted list of the unique elements in a sequence is to combine sorted with set:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sorted(set(<span class="string">'this is just some string'</span>)) <span class="comment"># [' ', 'e', 'g', 'h', 'i', 'j', 'm', 'n', 'o', 'r', 's', 't', 'u']</span></div></pre></td></tr></table></figure></p>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><p>zip “pairs” up the elements of a number of lists, tuples, or other sequences, to create a list of tuples:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">seq1 = [<span class="string">'foo'</span>,<span class="string">'bar'</span>,<span class="string">'baz'</span>]</div><div class="line">seq2 = [<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'three'</span>]</div><div class="line">zipped = zip(seq1,seq2)</div><div class="line">list(zipped)</div></pre></td></tr></table></figure></p>
<p>zip can take an arbitrary number of sequences, and the number of elements it produces is determined by the shortest sequence:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">seq3 = [<span class="keyword">False</span>, <span class="keyword">True</span>]</div><div class="line">list(zip(seq1,seq2,seq3)) <span class="comment"># [('foo', 'one', False), ('bar', 'two', True)]</span></div></pre></td></tr></table></figure></p>
<p>A very common use of zip is for simultaneously iterating over multiple sequences, possibly also combined with enumerate:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i, (a,b) <span class="keyword">in</span> enumerate(zip(seq1,seq2)):</div><div class="line">  print(<span class="string">'&#123;0&#125;: &#123;1&#125;, &#123;2&#125;'</span>.format(i,a,b))</div></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:center">0</th>
<th style="text-align:center">foo</th>
<th style="text-align:center">one</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">bar</td>
<td style="text-align:center">two</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">baz</td>
<td style="text-align:center">three</td>
</tr>
</tbody>
</table>
<h4 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h4><p>Another way to think about this is converting a list of rows into a list of columns.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line">pitchers = [(<span class="string">'Nolan'</span>, <span class="string">'Ryan'</span>), (<span class="string">'Roger'</span>, <span class="string">'Clemens'</span>),(<span class="string">'Schilling'</span>, <span class="string">'Curt'</span>)]</div><div class="line">first_names, last_names = zip(*pitchers)</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(pitchers)):</div><div class="line">  print(<span class="string">'&#123;0&#125; &#123;1&#125;'</span>.format(first_names[i],last_names[i]))</div></pre></td></tr></table></figure></p>
<p>Nolan Ryan<br>Roger Clemens<br>Schilling Curt</p>
<h2 id="Flow-control"><a href="#Flow-control" class="headerlink" title="Flow control"></a>Flow control</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># incomplete example</span></div><div class="line"><span class="keyword">if</span> integer &gt; <span class="number">3</span> <span class="keyword">and</span> integer &lt; <span class="number">34</span>:</div><div class="line"><span class="comment"># more example</span></div><div class="line"><span class="keyword">if</span> <span class="number">3</span> &lt; integer &lt; <span class="number">34</span>:</div></pre></td></tr></table></figure>
<p>Python replaces the usual C-style boolean operators (&amp;&amp;, ||, !) with words: and, or, and not respectively. For readability, you can add parentheses.</p>
<h2 id="NumPy"><a href="#NumPy" class="headerlink" title="NumPy"></a>NumPy</h2><p>NumPy is a library for the Python programming language, adding support for large, multi-dimensional arrays and matrices, along with a large collection of high-level mathematical functions to operate on these arrays.</p>
<p>String and tuples are immutable, while lists, dicts, NumPy arrays, user-defined types (classes) are mutable, meaning that the object or values that they contain can be modified. You can preface the leading quote of the string with rwhich means that the characters should be interpreted as is.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">s = <span class="string">'python'</span></div><div class="line">list(s)</div><div class="line">s[:<span class="number">3</span>]</div><div class="line">s[<span class="number">0</span>] = <span class="string">"z"</span> <span class="comment"># error message shows.</span></div></pre></td></tr></table></figure>
<h3 id="Create-ndarray"><a href="#Create-ndarray" class="headerlink" title="Create ndarray"></a>Create ndarray</h3><p>An <code>ndarray</code>, short for n-dimensional array, object is a generic multidimentional container for homogeneous data; all of the elements must be the same type.</p>
<h4 id="By-randomization"><a href="#By-randomization" class="headerlink" title="By randomization"></a>By randomization</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Set precision of printout</span></div><div class="line">np.set_printoptions(precision=<span class="number">4</span>, suppress=<span class="keyword">True</span>)</div><div class="line">data = randn(<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">data.dtype <span class="comment"># dtype('float64')</span></div><div class="line">data.shape <span class="comment"># tuple type; (2L, 3L)</span></div></pre></td></tr></table></figure>
<h4 id="Generate-random-integers-between-0-and-9"><a href="#Generate-random-integers-between-0-and-9" class="headerlink" title="Generate random integers between 0 and 9"></a>Generate random integers between 0 and 9</h4><p><a href="https://stackoverflow.com/questions/3996904/generate-random-integers-between-0-and-9" target="_blank" rel="external">stackoverflow</a></p>
<h4 id="By-functions"><a href="#By-functions" class="headerlink" title="By functions"></a>By functions</h4><h5 id="array-amp-dtype"><a href="#array-amp-dtype" class="headerlink" title="array() &amp; dtype"></a>array() &amp; dtype</h5><p>The <code>array</code> function accepts any sequence-like object (<strong>including other arrays</strong>) and produces a new NumPy array containing the passed data. A <code>list</code> is a good candidate for conversion:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data1 = [<span class="number">6</span>, <span class="number">7.5</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">1</span>]</div><div class="line">arr1 = np.array(data1)</div><div class="line">arr1.dtype <span class="comment"># dtype('float64')</span></div></pre></td></tr></table></figure></p>
<h5 id="nan"><a href="#nan" class="headerlink" title="nan()"></a>nan()</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">v = np.any([<span class="keyword">False</span>, <span class="keyword">False</span>, np.nan, <span class="keyword">True</span>])</div><div class="line">v <span class="comment"># True</span></div><div class="line">w = np.array(range(<span class="number">3</span>),dtype=np.float64)</div><div class="line">w <span class="comment"># array([ 0.,  1.,  2.])</span></div><div class="line">w[<span class="number">2</span>] = np.nan</div><div class="line">w <span class="comment"># array([  0.,   1.,  nan])</span></div></pre></td></tr></table></figure>
<h5 id="shape-amp-ndim"><a href="#shape-amp-ndim" class="headerlink" title="shape() &amp; ndim"></a>shape() &amp; ndim</h5><p>Nested sequences, like a list of <code>equal-length</code> lists, will be converted into a multi-dimentional array:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">data2 = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]]</div><div class="line">arr2 = np.array(data2)</div><div class="line">arr2 <span class="comment">#</span></div><div class="line">arr2.ndim <span class="comment"># 2</span></div><div class="line">arr2.shape <span class="comment"># (2L, 4L)</span></div><div class="line">arr2.dtype <span class="comment"># dtype('int32'). np.array() tries to infer a good data type for the array that it creates.</span></div></pre></td></tr></table></figure></p>
<h5 id="zeros-amp-ones-amp-empty"><a href="#zeros-amp-ones-amp-empty" class="headerlink" title="zeros() &amp; ones() &amp; empty()"></a>zeros() &amp; ones() &amp; empty()</h5><p><code>zeros</code> and <code>ones</code> create arrays of 0’s or 1’s. To create a higher dimensional array with these methods, pass a <code>tuple</code> for the shape. Note that it’s not safe to assume that np.empty will return an array of all zeros.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">np.zeros(<span class="number">10</span>) <span class="comment"># derivative: zeros_like(), ones(), ones_like()</span></div><div class="line">np.zeros((<span class="number">3</span>, <span class="number">6</span>)) <span class="comment">#</span></div><div class="line">np.empty((<span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>)) <span class="comment"># derivative: empty_like()</span></div></pre></td></tr></table></figure></p>
<h5 id="arange-amp-reshape"><a href="#arange-amp-reshape" class="headerlink" title="arange() &amp; reshape()"></a>arange() &amp; reshape()</h5><p><code>arange()</code> is an array-valued version of the built-in Python range function. It returns an <code>ndarray</code> instead of a list:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">arr = np.arange(<span class="number">15</span>)</div><div class="line">arr <span class="comment"># array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14])</span></div><div class="line">arr.dtype <span class="comment"># dtype('int32')</span></div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">arr2d = np.array(range(<span class="number">12</span>)).reshape((<span class="number">3</span>,<span class="number">4</span>))</div><div class="line">arr2d <span class="comment">#</span></div></pre></td></tr></table></figure>
<p>Reference: <a href="https://stackoverflow.com/questions/18691084/what-does-1-mean-in-numpy-reshape" target="_blank" rel="external">stackoverflow</a><br>Numpy allow us to give one of new shape parameter as -1 (eg: (2,-1) or (-1,3) but not (-1, -1)) which will throw an error. It simply means that it is an unknown dimension and we want numpy to figure it out.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">z = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</div><div class="line">z</div><div class="line">z.reshape(<span class="number">-1</span>) <span class="comment"># array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])</span></div><div class="line"><span class="comment"># Now trying to reshape with (-1, 1) . We have provided column as 1 but rows as unknown . So we get result new shape as (12, 1).</span></div><div class="line">z.reshape(<span class="number">-1</span>,<span class="number">1</span>)</div><div class="line"><span class="comment"># New shape as (-1, 2). row unknown, column 2. we get result new shape as (6, 2)</span></div><div class="line">z.reshape(<span class="number">-1</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-82.png" alt=""></p>
<p>The <code>order</code> keyword of reshape gives the index ordering both for <strong>fetching</strong> the values from the initial data, and then <strong>placing</strong> the values into the output array.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">a = np.arange(<span class="number">6</span>).reshape((<span class="number">3</span>,<span class="number">2</span>))</div><div class="line">a</div><div class="line">np.reshape(a,(<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># C-like index order. That is, fetching the values in row major ordering, then placing them in the same ording into the output matrix.</span></div><div class="line"><span class="comment"># similarly,</span></div><div class="line">np.reshape(np.ravel(a),(<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># equivalent to C ravel then C reshape</span></div></pre></td></tr></table></figure></p>
<p><img src="p-basic-78.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">np.reshape(a,(<span class="number">2</span>,<span class="number">3</span>),order=<span class="string">'F'</span>) <span class="comment"># Fortran-like index ordering</span></div><div class="line"><span class="comment"># similarly,</span></div><div class="line">np.reshape(np.ravel(a,order=<span class="string">'F'</span>),(<span class="number">2</span>,<span class="number">3</span>),order=<span class="string">'F'</span>)</div></pre></td></tr></table></figure>
<p><img src="p-basic-77.png" alt=""><br>Reference: <a href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.reshape.html" target="_blank" rel="external">scipy</a></p>
<h5 id="view"><a href="#view" class="headerlink" title="view()"></a>view()</h5><p>Taking a view makes it possible to modify the newly produced matrix without modifying the initial object:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#data</span></div><div class="line">a = np.zeros((<span class="number">10</span>,<span class="number">2</span>))</div><div class="line">a</div><div class="line">b = a.T</div><div class="line">b</div><div class="line"><span class="comment">#take a view</span></div><div class="line">c = b.view()</div><div class="line">c.shape = (<span class="number">20</span>) <span class="comment">#error message raises.</span></div><div class="line">c.shape <span class="comment"># (2, 10)</span></div></pre></td></tr></table></figure></p>
<h3 id="Type-conversion"><a href="#Type-conversion" class="headerlink" title="Type conversion"></a>Type conversion</h3><h4 id="Numpy-matrix-vs-Numpy-array"><a href="#Numpy-matrix-vs-Numpy-array" class="headerlink" title="Numpy matrix vs Numpy array"></a>Numpy matrix vs Numpy array</h4><p>Reference <a href="https://www.ibm.com/developerworks/community/blogs/jfp/entry/Elementary_Matrix_Operations_In_Python?lang=en" target="_blank" rel="external">IBM developerworks</a></p>
<h4 id="dtype"><a href="#dtype" class="headerlink" title="dtype"></a>dtype</h4><p>A standard double-precision floating point value (what’s used under the hood in Python’s <code>float</code> object) takes up 8 bytes or 64 bits. This type is known in NumPy as <code>float64</code>.</p>
<p>To create a string dtype with length 10, use the type code <code>S10</code>(1 byte per character). For creating a unicode dtype with length 10, use <code>U10</code>:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">arr1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.float64)</div><div class="line">arr2 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.int32)</div><div class="line">arr1.dtype <span class="comment"># dtype('float64')</span></div><div class="line">arr2.dtype <span class="comment"># dtype('int32')</span></div></pre></td></tr></table></figure></p>
<h4 id="astype"><a href="#astype" class="headerlink" title="astype()"></a>astype()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">int_arr = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</div><div class="line"></div><div class="line"><span class="comment"># method 1: astype()</span></div><div class="line"><span class="comment"># Calling astype always creates a new array (a copy of the data).</span></div><div class="line">float_arr = int_arr.astype(np.float64)</div><div class="line">float_arr.dtype <span class="comment"># dtype('float64')</span></div><div class="line"></div><div class="line"><span class="comment"># method 2: parameter dtype</span></div><div class="line">float_arr1 = np.array(int_arr, dtype=np.float64)</div><div class="line">float_arr1.dtype</div><div class="line"></div><div class="line"><span class="comment"># method 3: read dtype of existing array</span></div><div class="line">float_arr2 = int_arr.astype(float_arr1.dtype)</div><div class="line">float_arr2 <span class="comment"># array([ 1.,  2.,  3.,  4.,  5.])</span></div></pre></td></tr></table></figure>
<p>Optional parameters: np.string_ and np.unicode_<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 1</span></div><div class="line">ray_strings = np.array([<span class="string">'1.25'</span>, <span class="string">'-9.6'</span>, <span class="string">'42'</span>], dtype=np.string_)</div><div class="line">ray_strings <span class="comment"># array(['1.25', '-9.6', '42'], dtype='|S4')</span></div><div class="line">ray_strings.astype(float) <span class="comment"># array([  1.25,  -9.6 ,  42.  ])</span></div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 2</span></div><div class="line">int_array = np.arange(<span class="number">10</span>)</div><div class="line">calibers = np.array([<span class="number">.22</span>, <span class="number">.270</span>, <span class="number">.357</span>, <span class="number">.380</span>, <span class="number">.44</span>, <span class="number">.50</span>], dtype=np.float64)</div><div class="line">int_array.astype(calibers.dtype)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># unit32 examples</span></div><div class="line">empty_uint32 = np.empty(<span class="number">8</span>, dtype=<span class="string">'u4'</span>)</div><div class="line">empty_uint32 <span class="comment"># array([0, 0, 0, 0, 0, 0, 0, 0], dtype=uint32)</span></div></pre></td></tr></table></figure>
<h4 id="String-to-numeric-string"><a href="#String-to-numeric-string" class="headerlink" title="String to numeric_string"></a>String to numeric_string</h4><p>See the topic about “missing data” in the Pandas section.</p>
<h4 id="Factorization"><a href="#Factorization" class="headerlink" title="Factorization"></a>Factorization</h4><h5 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># general</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line">df = pd.DataFrame(&#123;<span class="string">"A"</span>:[<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"a"</span>]&#125;)</div><div class="line">df</div><div class="line">df[<span class="string">"B"</span>] = df[<span class="string">"A"</span>].astype(<span class="string">'category'</span>)</div><div class="line">df</div></pre></td></tr></table></figure>
<p><img src="p-basic-01.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.describe()</div></pre></td></tr></table></figure>
<p><img src="p-basic-02.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># customary ordered categories (with undefined cateogries)</span></div><div class="line">df1 = pd.Series([<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"a"</span>])</div><div class="line">df1</div><div class="line">df1 = df1.astype(<span class="string">"category"</span>, categories=[<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>], ordered=<span class="keyword">False</span>)</div><div class="line">df1</div></pre></td></tr></table></figure>
<p><img src="p-basic-03.png" alt=""></p>
<h5 id="string-vector-creation-amp-frequency"><a href="#string-vector-creation-amp-frequency" class="headerlink" title="string vector creation &amp; frequency"></a>string vector creation &amp; frequency</h5><p><strong>[Trick]</strong> Based on a list of automatically generated strings to perform grouping:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line">df = pd.DataFrame(&#123;<span class="string">'value'</span>: np.random.randint(<span class="number">0</span>, <span class="number">100</span>, <span class="number">20</span>)&#125;)</div><div class="line">df.head(<span class="number">5</span>)</div><div class="line"></div><div class="line">labels = [ <span class="string">"&#123;0&#125; - &#123;1&#125;"</span>.format(i, i + <span class="number">9</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>) ]</div><div class="line">labels</div><div class="line">df[<span class="string">'group'</span>] = pd.cut(df.value, range(<span class="number">0</span>, <span class="number">105</span>, <span class="number">10</span>), right=<span class="keyword">False</span>, labels=labels)</div><div class="line">df.head(<span class="number">10</span>)</div></pre></td></tr></table></figure></p>
<p><strong>Operations between arrays and scalars</strong> Arrays are important because they enable you to express batch operations on data without writing any for loops. This is usually called <code>vectorization</code>. Any arithmetic operations between equal-size arrays applies the operation element-wise.</p>
<h3 id="Indexing"><a href="#Indexing" class="headerlink" title="Indexing"></a>Indexing</h3><p>If you assign a scalar value to a slice, as in arr[5:8] = 12, the value is <code>propagated</code> (or <code>broadcasted</code> henceforth) to the entire selection. An important first distinction from lists is that array slices are <code>views</code> on the original array. This means that the data is not copied, and any modifications to the view <strong>will be</strong> reflected in the source array:</p>
<h4 id="One-dimension-indexing"><a href="#One-dimension-indexing" class="headerlink" title="One-dimension indexing"></a>One-dimension indexing</h4><p>Python (and C++) is row-major, while Fortran (Julia, R, and Matlab) is column-major.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">arr = np.arange(<span class="number">10</span>)</div><div class="line">arr[<span class="number">5</span>:<span class="number">8</span>] = <span class="number">12</span></div><div class="line">arr</div><div class="line"></div><div class="line">arr[:] = <span class="number">100</span></div><div class="line">arr <span class="comment"># array([100, 100, 100, 100, 100, 100, 100, 100, 100, 100])</span></div><div class="line"></div><div class="line">part_arr = arr[<span class="number">5</span>:<span class="number">8</span>] <span class="comment"># part_arr remains a view of arr</span></div><div class="line">part_arr[<span class="number">2</span>] = <span class="number">2</span></div><div class="line">arr <span class="comment"># array([100, 100, 100, 100, 100, 100, 100,   2, 100, 100])</span></div></pre></td></tr></table></figure></p>
<p>If you need to explicitly copy the array instead of a view of it, use <code>copy()</code>:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">copy_arr = arr[<span class="number">5</span>:<span class="number">8</span>].copy() <span class="comment"># Don't miss the parenthesis!!</span></div><div class="line">copy_arr</div><div class="line">copy_arr[<span class="number">2</span>] = <span class="number">-1</span></div><div class="line">arr <span class="comment"># remains unchanged: array([100, 100, 100, 100, 100, 100, 100,   2, 100, 100])</span></div></pre></td></tr></table></figure></p>
<p>Note that when assigning a variable (or name) in Python, you are creating a reference to the object on the right hand side of the equals sign. Python is said to always pass-by-reference, whereas some other languages (like C++) support various argument passing conventions, including as pass-by-value (creating copies) and pass-by-reference. This means that a function in Python can alter the internals of its arguments.</p>
<h4 id="Numpy-indexing"><a href="#Numpy-indexing" class="headerlink" title="Numpy indexing"></a>Numpy indexing</h4><p>In multidimensional arrays, if you omit later indices, the returned object will be a lower-dimensional ndarray consisting of all the data along the higher dimensions.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># create a 3x4 array</span></div><div class="line">arr2d = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</div><div class="line">arr2d[<span class="number">2</span>] <span class="comment"># array([7, 8, 9])</span></div><div class="line">arr2d[<span class="number">0</span>][<span class="number">2</span>] <span class="comment"># 3; from the outermost brackets toward the innermost</span></div><div class="line">arr2d[<span class="number">0</span>, <span class="number">2</span>] <span class="comment"># 3</span></div></pre></td></tr></table></figure></p>
<p>Note that the “outtermost” bracket represents the “lowest” dimension.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">arr3d = np.array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]], [[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]]])</div><div class="line">arr3d.shape <span class="comment"># (2L, 2L, 3L)</span></div><div class="line">arr3d[<span class="number">0</span>] <span class="comment"># the 1st element of the "outtermost" bracket ("lowest" dimension)</span></div><div class="line">         <span class="comment"># array([[1, 2, 3], [4, 5, 6]])</span></div></pre></td></tr></table></figure></p>
<p>A slice selects a range of elements along an axis.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">arr2d = np.array(range(<span class="number">12</span>)).reshape((<span class="number">3</span>,<span class="number">4</span>))</div><div class="line">arr2d <span class="comment"># array([[ 0,  1,  2,  3],</span></div><div class="line">      <span class="comment"># [ 4,  5,  6,  7],</span></div><div class="line">      <span class="comment"># [ 8,  9, 10, 11]])</span></div><div class="line">arr2d[:<span class="number">2</span>] <span class="comment"># array([[0, 1, 2, 3],</span></div><div class="line">          <span class="comment">#        [4, 5, 6, 7]])</span></div></pre></td></tr></table></figure></p>
<p>Note that a colon by itself means to take the entire axis, so you can slice only higher dimensional axes by doing:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">arr2d[:, :<span class="number">1</span>] <span class="comment"># array([[0],</span></div><div class="line">             <span class="comment">#        [4],</span></div><div class="line">             <span class="comment">#        [8]])</span></div></pre></td></tr></table></figure></p>
<h4 id="Numpy-conditional-indexing"><a href="#Numpy-conditional-indexing" class="headerlink" title="Numpy conditional indexing"></a>Numpy conditional indexing</h4><p><strong>Make a subset of observations</strong> The boolean array must be of the same length as the axis it’s indexing. Selecting data from an array by boolean indexing always creates a copy of the data, even if the returned array is <strong>unchanged</strong>.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">names = np.array([<span class="string">'Bob'</span>, <span class="string">'Joe'</span>, <span class="string">'Will'</span>, <span class="string">'Bob'</span>, <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Joe'</span>])</div><div class="line">data = np.arange(<span class="number">28</span>).reshape((<span class="number">7</span>,<span class="number">4</span>))</div><div class="line">data</div><div class="line">names <span class="comment"># array(['Bob', 'Joe', 'Will', 'Bob', 'Will', 'Joe', 'Joe'], dtype='|S4')</span></div><div class="line"><span class="comment"># example 1:</span></div><div class="line">names == <span class="string">'Bob'</span> <span class="comment"># array([ True, False, False,  True, False, False, False], dtype=bool)</span></div><div class="line">data[names == <span class="string">'Bob'</span>] <span class="comment"># row 0 and row 4 remain</span></div><div class="line">data[names == <span class="string">'Bob'</span>, <span class="number">2</span>:] <span class="comment"># from column 2 to the last (included)</span></div><div class="line">data[names == <span class="string">'Bob'</span>, <span class="number">3</span>]</div><div class="line">names != <span class="string">'Bob'</span></div><div class="line">data[-(names == <span class="string">'Bob'</span>)] <span class="comment"># remove</span></div><div class="line"><span class="comment"># example 2:</span></div><div class="line">mask = (names == <span class="string">'Bob'</span>) | (names == <span class="string">'Will'</span>)</div><div class="line">mask <span class="comment"># array([ True, False,  True,  True,  True, False, False], dtype=bool)</span></div><div class="line">data[mask]</div></pre></td></tr></table></figure></p>
<p><strong>Multiple conditions</strong><br>The Python keywords <code>and</code> and <code>or</code> do not work with boolean arrays, because the boolean operators <code>and</code> and <code>or</code> in Python are so-called short-circuit operators: their arguments are evaluated from left to right, and evaluation stops as soon as the outcome is determined.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># example 1:</span></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line">data = np.arange(<span class="number">28</span>).reshape((<span class="number">7</span>,<span class="number">4</span>))</div><div class="line">data</div><div class="line">data[data &lt; <span class="number">3</span> ] = <span class="number">0</span> <span class="comment"># OK.</span></div><div class="line">data</div><div class="line"><span class="comment"># example 2:</span></div><div class="line">data[data &gt;=<span class="number">24</span> <span class="keyword">and</span> data &lt;= <span class="number">26</span>] = <span class="number">10</span> <span class="comment"># It doesn't work. More than one condition.</span></div><div class="line">data[(data &gt;=<span class="number">24</span>) <span class="keyword">and</span> (data &lt;= <span class="number">26</span>)] = <span class="number">10</span> <span class="comment"># it doesn't work</span></div><div class="line">data</div><div class="line">data[np.all([data&gt;=<span class="number">24</span>,data&lt;=<span class="number">26</span>],axis=<span class="number">0</span>)]=<span class="number">10</span> <span class="comment"># it works!!</span></div><div class="line">data</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-04.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># example 3:</span></div><div class="line">names = np.array([<span class="string">'Bob'</span>, <span class="string">'Joe'</span>, <span class="string">'Will'</span>, <span class="string">'Bob'</span>, <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Joe'</span>])</div><div class="line">data[names != <span class="string">'Joe'</span>] = <span class="number">7</span></div><div class="line">data</div></pre></td></tr></table></figure>
<p><img src="p-basic-05.png" alt=""></p>
<h4 id="Indexing-tricks"><a href="#Indexing-tricks" class="headerlink" title="Indexing tricks"></a>Indexing tricks</h4><h5 id="Re-ordering"><a href="#Re-ordering" class="headerlink" title="Re-ordering"></a>Re-ordering</h5><p>Fancy indexing is a term adopted by NumPy to describe indexing using integer <code>arrays</code>. To select out a subset of the <code>rows</code> in a particular order, you can simply pass a list or ndarray of integers specifying the desired order<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">arr = np.empty((<span class="number">8</span>, <span class="number">4</span>))</div><div class="line"><span class="comment"># [Trick] fill up row data with loop.</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">8</span>):</div><div class="line">    arr[i] = i</div><div class="line">arr</div><div class="line">arr[[<span class="number">4</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">6</span>]]</div><div class="line"><span class="comment"># Using negative indices select rows from the end</span></div><div class="line">arr[[<span class="number">-3</span>, <span class="number">-5</span>, <span class="number">-7</span>]]</div></pre></td></tr></table></figure></p>
<h5 id="Select-a-square-region"><a href="#Select-a-square-region" class="headerlink" title="Select a square region"></a>Select a square region</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">arr = np.arange(<span class="number">32</span>).reshape((<span class="number">8</span>, <span class="number">4</span>))</div><div class="line">arr</div></pre></td></tr></table></figure>
<p><img src="p-basic-06.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">arr[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>]] <span class="comment"># returns four elements: array([ 4, 23, 29, 10])</span></div><div class="line"><span class="comment"># method 1:</span></div><div class="line">arr[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>]][:, [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>]] <span class="comment"># the rectangular region formed by the four elements</span></div></pre></td></tr></table></figure>
<p><img src="p-basic-07.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Similarly, the np.ix_ function converts two 1D integer arrays to an indexer that selects the square region</span></div><div class="line"><span class="comment"># method 2:</span></div><div class="line">arr[np.ix_([<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>])]</div></pre></td></tr></table></figure>
<h4 id="Meshgrid-method"><a href="#Meshgrid-method" class="headerlink" title="Meshgrid method"></a>Meshgrid method</h4><p>The np.meshgrid function takes two 1D arrays and produces two 2D matrices corresponding to all pairs of (x, y) in the two arrays.</p>
<h5 id="With-equal-number-of-points"><a href="#With-equal-number-of-points" class="headerlink" title="With equal number of points"></a>With equal number of points</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">from</span> matplotlib.pyplot <span class="keyword">import</span> imshow, title</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line">points = np.arange(<span class="number">-5</span>, <span class="number">5</span>, <span class="number">0.01</span>) <span class="comment"># 1000 equally spaced points</span></div><div class="line">xs, ys = np.meshgrid(points, points)</div><div class="line">xs <span class="comment"># in increasing order from left to right</span></div><div class="line">ys <span class="comment"># in increasing order from top to bottom</span></div><div class="line"><span class="comment"># mesh plot</span></div><div class="line">z = np.sqrt(xs ** <span class="number">2</span> + ys ** <span class="number">2</span>)</div><div class="line">z.shape</div><div class="line">plt.imshow(z, cmap=plt.cm.gray)</div><div class="line">plt.colorbar()</div><div class="line">plt.title(<span class="string">"Image plot of $\sqrt&#123;x^2 + y^2&#125;$ for a grid of values"</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="p-basic-08.png" alt=""><br>Note that <code>a//b</code> means “floor-divide” a by b, dropping any fractional remainder. a**b means “raise a to the b power”</p>
<h5 id="With-different-number-of-points-in-x-y-axis"><a href="#With-different-number-of-points-in-x-y-axis" class="headerlink" title="With different number of points in x, y axis"></a>With different number of points in x, y axis</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="comment"># similarly, from matplotlib import pyplot as plt</span></div><div class="line"><span class="keyword">import</span> matplotlib</div><div class="line">fig = plt.figure()</div><div class="line">ax = fig.add_subplot(<span class="number">111</span>,projection=<span class="string">'3d'</span>)</div><div class="line"><span class="comment">#! It won't show in notebook but spyder!</span></div><div class="line"><span class="comment"># To create a data matrix:</span></div><div class="line">dx = [x/<span class="number">10.</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">-5</span>,<span class="number">30</span>,<span class="number">5</span>)]</div><div class="line">dy = [y/<span class="number">10.</span> <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">30</span>,<span class="number">5</span>)]</div><div class="line">mat1 = [[dx[i]+dy[j] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(dx))] <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,len(dy))]</div><div class="line"><span class="comment">#! row-major operations over pairs of (i,j) above</span></div><div class="line">X, Y = np.meshgrid(dx,dy)</div><div class="line">Z = mat1</div><div class="line">ax.plot_surface(X,Y,Z)</div><div class="line"></div><div class="line"><span class="comment"># to display latex needs to affix the string with "r"</span></div><div class="line">ax.set_xlabel(<span class="string">'X Label'</span>)</div><div class="line">ax.set_ylabel(<span class="string">'Y Label'</span>)</div><div class="line">ax.set_zlabel(<span class="string">'Z Label'</span>)</div><div class="line">ax.set_title(<span class="string">r"$\beta=1$ and $\alpha=5$"</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h5 id="Task-utility-surface"><a href="#Task-utility-surface" class="headerlink" title="Task: utility surface"></a>Task: utility surface</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> axes3d, Axes3D</div><div class="line"></div><div class="line">sigma = <span class="number">1.8</span></div><div class="line">theta = <span class="number">0.05</span></div><div class="line">epsilon = <span class="number">0.1</span> <span class="comment">#</span></div><div class="line">homeeps = <span class="number">1.</span></div><div class="line">cst = <span class="number">0.</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x,h,sigma=<span class="number">1.5</span>,theta=<span class="number">0.1359</span>,epsilon=<span class="number">1.e-3</span>)</span>:</span></div><div class="line">    g = (x)**(<span class="number">1.</span>-theta)*(h+epsilon*homeeps)**(theta)</div><div class="line">    <span class="keyword">return</span> (g**(<span class="number">1.</span>-sigma)-cst)/(<span class="number">1.</span>-sigma)</div><div class="line"></div><div class="line">dc = [a/<span class="number">10.</span> <span class="keyword">for</span> a <span class="keyword">in</span> range( <span class="number">1</span>,<span class="number">100</span>,<span class="number">2</span>)]</div><div class="line">dh = [h/<span class="number">10.</span> <span class="keyword">for</span> h <span class="keyword">in</span> range( <span class="number">1</span>,<span class="number">100</span>,<span class="number">2</span>)]</div><div class="line">C, H = np.meshgrid(dc,dh)</div><div class="line">F = [[ f(dc[i],dh[j],sigma,theta,epsilon) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(dc))] <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,len(dh))]</div><div class="line">F = np.array(F)</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">ax  = Axes3D(fig)</div><div class="line">ax.plot_wireframe(C,H,F,rstride=<span class="number">2</span>,cstride=<span class="number">2</span>)</div><div class="line">cset = ax.contour(C,H,F)</div><div class="line"></div><div class="line">ax.set_xlabel(<span class="string">'consumption'</span>)</div><div class="line">ax.set_ylabel(<span class="string">'housing asset'</span>)</div><div class="line">ax.set_zlabel(<span class="string">'util'</span>)</div><div class="line">ax.set_title(<span class="string">"cst=&#123;0&#125;"</span>.format(cst))</div><div class="line">ax.view_init(<span class="number">25</span>, <span class="number">210</span>)</div><div class="line">plt.savefig(<span class="string">"0.png"</span>,transparent=<span class="keyword">True</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="p-basic-39.png" alt=""></p>
<h3 id="Pairing-lists"><a href="#Pairing-lists" class="headerlink" title="Pairing lists"></a>Pairing lists</h3><p>Expressing conditional logic as array operations:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">xarr = np.array([<span class="number">1.1</span>, <span class="number">1.2</span>, <span class="number">1.3</span>, <span class="number">1.4</span>, <span class="number">1.5</span>])</div><div class="line">yarr = np.array([<span class="number">2.1</span>, <span class="number">2.2</span>, <span class="number">2.3</span>, <span class="number">2.4</span>, <span class="number">2.5</span>])</div><div class="line">cond = np.array([<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>])</div><div class="line">result = [(x <span class="keyword">if</span> c <span class="keyword">else</span> y)</div><div class="line">          <span class="keyword">for</span> x, y, c <span class="keyword">in</span> zip(xarr, yarr, cond)]</div><div class="line">result <span class="comment"># [1.1000000000000001, 2.2000000000000002, 1.3, 1.3999999999999999, 2.5]</span></div></pre></td></tr></table></figure></p>
<h4 id="Boolean-toolkits"><a href="#Boolean-toolkits" class="headerlink" title="Boolean toolkits"></a>Boolean toolkits</h4><p>The numpy.where function is a vectorized version of the ternary expression <code>x if condition else y</code>. A typical use of where in data analysis is to produce a new array of values based on another array. Suppose you had a matrix of randomly generated data and you wanted to replace all positive values with 2 and all negative values with -2.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">result = np.where(cond, xarr, yarr)</div><div class="line">result <span class="comment"># array([ 1.1,  2.2,  1.3,  1.4,  2.5])</span></div></pre></td></tr></table></figure></p>
<h3 id="Conditional-replacement"><a href="#Conditional-replacement" class="headerlink" title="Conditional replacement"></a>Conditional replacement</h3><p><strong>Example 1.</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">arr = randn(<span class="number">4</span>, <span class="number">4</span>)</div><div class="line">arr</div><div class="line">np.where(arr &gt; <span class="number">0</span>, <span class="number">2</span>, <span class="number">-2</span>)</div><div class="line">np.where(arr &gt; <span class="number">0</span>, <span class="number">2</span>, arr) <span class="comment"># set only positive values to 2</span></div></pre></td></tr></table></figure></p>
<p><img src="p-basic-09.png" alt=""></p>
<p><strong>Example 2.</strong> Consider I have two boolean arrays, cond1 and cond2, and wish to assign a different value for each of the 4 (2x2=4) possible pairs of boolean values.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Method 1. traditional version</span></div><div class="line">result = []</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">    <span class="keyword">if</span> cond1[i] <span class="keyword">and</span> cond2[i]:</div><div class="line">        result.append(<span class="number">0</span>)</div><div class="line">    <span class="keyword">elif</span> cond1[i]:</div><div class="line">        result.append(<span class="number">1</span>)</div><div class="line">    <span class="keyword">elif</span> cond2[i]:</div><div class="line">        result.append(<span class="number">2</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        result.append(<span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="comment"># Method 2. improved version</span></div><div class="line">np.where(cond1 &amp; cond2, <span class="number">0</span>, np.where(cond1, <span class="number">1</span>, np.where(cond2, <span class="number">2</span>, <span class="number">3</span>)))</div><div class="line"></div><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># Method 3. Alternative method</span></div><div class="line">result = <span class="number">1</span> * cond1 + <span class="number">2</span> * cond2 + <span class="number">3</span> * - (cond1 | cond2)</div><div class="line"><span class="comment"># Example:</span></div><div class="line">ray =  <span class="number">10</span></div><div class="line">result = <span class="number">1</span>*(ray&gt;<span class="number">7</span>) + <span class="number">2</span>*(ray&lt;<span class="number">3</span>) + <span class="number">3</span> * -( ray&gt;<span class="number">7</span> | ray&lt;<span class="number">3</span> ) <span class="comment"># we use bitwise operator OR.</span></div><div class="line">result</div></pre></td></tr></table></figure></p>
<p>more: <a href="https://www.programiz.com/python-programming/operators#bitwise_operators" target="_blank" rel="external">Bitwise operators</a>; <a href="http://blog.csdn.net/carolzhang8406/article/details/6091649" target="_blank" rel="external">Operator Precednece</a></p>
<h5 id="Counting-events"><a href="#Counting-events" class="headerlink" title="Counting events"></a>Counting events</h5><p>Boolean values are coerced to 1 (True) and 0 (False) in the above methods. Thus, sum is often used as a means of <code>counting</code> True values in a boolean array:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">arr = randn(<span class="number">100</span>)</div><div class="line">(arr &gt; <span class="number">0</span>).sum() <span class="comment"># Number of positive values</span></div></pre></td></tr></table></figure></p>
<p><code>any</code> tests whether one or more values in an array is True, while <code>all</code> checks if every value is True:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">bools = np.array([<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">False</span>])</div><div class="line">bools.any()</div><div class="line">bools.all()</div></pre></td></tr></table></figure></p>
<h4 id="Sets-1"><a href="#Sets-1" class="headerlink" title="Sets"></a>Sets</h4><p>NumPy has some basic set operations for <code>one-dimensional</code> ndarrays. Probably the most commonly used one is np.unique, which returns the sorted unique values in an array.</p>
<h5 id="Basic-operations"><a href="#Basic-operations" class="headerlink" title="Basic operations"></a>Basic operations</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">names = np.array([<span class="string">'Bob'</span>,  <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Bob'</span>, <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Joe'</span>])</div><div class="line">np.unique(names) <span class="comment"># array(['Bob', 'Joe', 'Will'], dtype='|S4')</span></div><div class="line">ints = np.array([<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>])</div><div class="line"></div><div class="line"><span class="comment"># Method 1.</span></div><div class="line">np.unique(ints) <span class="comment"># array([1, 2, 3, 4])</span></div><div class="line"></div><div class="line"><span class="comment"># Method 2. a pure Python alternavie</span></div><div class="line">set(names)</div><div class="line">set</div><div class="line">sorted(set(names)) <span class="comment"># ['Bob', 'Joe', 'Will']</span></div><div class="line">set</div></pre></td></tr></table></figure>
<h5 id="Membership"><a href="#Membership" class="headerlink" title="Membership"></a>Membership</h5><p>To test membership of the values in one array in another, returning a boolean array, use <code>in1d</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">values = np.array([<span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>])</div><div class="line">np.in1d(values, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>]) <span class="comment"># array([ True, False, False,  True,  True, False,  True], dtype=bool)</span></div></pre></td></tr></table></figure></p>
<p>More: intersect1d, union1d, setdiff1d, setxor1d<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></p>
<h5 id="Column-grouping-by-types"><a href="#Column-grouping-by-types" class="headerlink" title="Column grouping by types"></a>Column grouping by types</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line">df = pd.DataFrame([[<span class="number">1</span>, <span class="number">2.3456</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="number">78</span>]], columns=list(<span class="string">"ABCDE"</span>))</div><div class="line">df</div><div class="line">df.dtypes</div><div class="line"><span class="comment"># trick 1-1</span></div><div class="line">g = df.columns.to_series().groupby(df.dtypes).groups</div><div class="line">g</div><div class="line"><span class="comment"># trick 1-2</span></div><div class="line">dg = &#123;k.name: v <span class="keyword">for</span> k,v <span class="keyword">in</span> g.items()&#125; <span class="comment"># generate a dictionary of groups with contents</span></div><div class="line"><span class="comment"># outcome</span></div><div class="line">value = dg[<span class="string">'int64'</span>].values</div><div class="line">value</div></pre></td></tr></table></figure>
<h4 id="Numpy-functions"><a href="#Numpy-functions" class="headerlink" title="Numpy functions"></a>Numpy functions</h4><p>Almost every object in Python has attached functions, known as methods, that have access to the object’s internal contents.</p>
<h5 id="Summary-statistics"><a href="#Summary-statistics" class="headerlink" title="Summary statistics"></a>Summary statistics</h5><p>A universal function is a function that performs element-wise operations on data in ndarrays: <strong>sqrt(), square(), ceil(), floor(), rint(), modf(), isnan(), isfinite(), isinf().</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">arr = np.arange(<span class="number">10</span>)</div><div class="line">np.sqrt(arr)</div><div class="line">np.exp(arr)</div></pre></td></tr></table></figure></p>
<p>For example: swapaxes(), sum() &amp; mean()<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">arr = np.arange(<span class="number">16</span>).reshape((<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>))</div><div class="line">arr.swapaxes(<span class="number">1</span>, <span class="number">2</span>) .shape <span class="comment"># (2L, 4L, 2L)</span></div><div class="line"></div><div class="line">arr = np.random.randn(<span class="number">5</span>, <span class="number">4</span>) <span class="comment"># normally-distributed data</span></div><div class="line">arr</div><div class="line">arr.mean() <span class="comment"># its own method (method 1)</span></div><div class="line">np.mean(arr) <span class="comment"># function from NumPy (method 2)</span></div><div class="line"></div><div class="line">arr.sum()</div><div class="line">arr.mean(axis=<span class="number">1</span>) <span class="comment"># Over axis 1: take average over axis=1 (columns) for each row; axis=1 collapses in the end)</span></div><div class="line">arr.sum(<span class="number">0</span>) <span class="comment"># Over axis 0: sum over rows for each column; axis=0 collapses</span></div></pre></td></tr></table></figure></p>
<h5 id="Cumulation"><a href="#Cumulation" class="headerlink" title="Cumulation"></a>Cumulation</h5><p>Other methods like <code>cumsum</code> and <code>cumprod</code> do not aggregate, instead producing an array<br>of the intermediate results:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">arr = np.array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</div><div class="line">arr.cumsum(<span class="number">0</span>) <span class="comment"># Over axis 0: sum over rows for each column</span></div><div class="line">arr.cumprod(<span class="number">1</span>) <span class="comment"># Over axis 1: product across columns for each row; values related to horizontal neighboring elements</span></div></pre></td></tr></table></figure></p>
<p>More: min, max, argmin, argmax</p>
<h5 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h5><p>The top level method <code>np.sort</code> returns a sorted copy of an array instead of modifying<br>the array in place.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> random</div><div class="line">l = range(<span class="number">1</span>,<span class="number">10</span>)</div><div class="line">ray = random.sample(l,<span class="number">8</span>)</div><div class="line">ray <span class="comment"># [4, 7, 2, 6, 5, 1, 8, 3]</span></div><div class="line"></div><div class="line">arr = np.array(ray)</div><div class="line">arr</div><div class="line"><span class="comment"># Method 1</span></div><div class="line">np.sort(arr) <span class="comment"># returns array([1, 2, 3, 4, 5, 6, 7, 8]), but arr doesn't change.</span></div><div class="line">arr</div><div class="line"><span class="comment"># Method 2</span></div><div class="line">arr.sort() <span class="comment"># use its own method. arr changes.</span></div><div class="line">arr</div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randn</div><div class="line">arr = randn(<span class="number">8</span>)</div><div class="line">arr</div><div class="line">arr.sort()</div><div class="line">arr</div><div class="line"><span class="comment"># two dimensional ndarray</span></div><div class="line">arr = randn(<span class="number">5</span>, <span class="number">3</span>)</div><div class="line">arr</div><div class="line">arr.sort(<span class="number">1</span>) <span class="comment"># Over axis 1 (sorting within each row vector)</span></div><div class="line">arr</div></pre></td></tr></table></figure>
<h5 id="Quantiles"><a href="#Quantiles" class="headerlink" title="Quantiles"></a>Quantiles</h5><p>Task: Compute the quantiles of an array.<br>Hint: use the <code>sort</code> method to have it sorted in-place.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">large_arr = randn(<span class="number">10</span>)</div><div class="line">large_arr</div><div class="line">large_arr.sort()</div><div class="line">large_arr</div><div class="line">large_arr[int(<span class="number">0.05</span> * len(large_arr))] <span class="comment"># 5% quantile</span></div></pre></td></tr></table></figure></p>
<h5 id="tile-amp-repeat"><a href="#tile-amp-repeat" class="headerlink" title="tile &amp; repeat"></a>tile &amp; repeat</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x = np.tile(np.arange(<span class="number">3</span>),<span class="number">3</span>)</div><div class="line">y = np.repeat(np.arange(<span class="number">3</span>),<span class="number">3</span>)</div><div class="line">df = pd.DataFrame(&#123;<span class="string">"x"</span>: x, <span class="string">"y"</span>: y&#125;)</div></pre></td></tr></table></figure>
<h4 id="Binary-universal-functions"><a href="#Binary-universal-functions" class="headerlink" title="Binary universal functions"></a>Binary universal functions</h4><p>Take 2 arrays (thus, binary ufuncs) and return a single array as the result: <strong>maximum(), subtract(), modf()</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">x = randn(<span class="number">8</span>)</div><div class="line">y = randn(<span class="number">8</span>)</div><div class="line">x</div><div class="line">y</div><div class="line">np.maximum(x, y) <span class="comment"># element-wise maximum</span></div><div class="line">np.subtract(x,y) <span class="comment"># the same as x-y</span></div><div class="line">x - y</div><div class="line"><span class="comment"># more:</span></div><div class="line">arr = randn(<span class="number">7</span>) * <span class="number">5</span></div><div class="line">np.modf(arr)</div></pre></td></tr></table></figure></p>
<p>More functions: add, subtract, multiply, divide, floor_divide, power, maximum, fmax, minimum, fmin, mod, copysign</p>
<h5 id="Transpose-and-swap-axes"><a href="#Transpose-and-swap-axes" class="headerlink" title="Transpose and swap axes"></a>Transpose and swap axes</h5><p>To compute the inner matrix product $X^T X$ use <code>np.dot</code>.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">arr = np.arange(<span class="number">15</span>).reshape((<span class="number">3</span>, <span class="number">5</span>))</div><div class="line">arr</div><div class="line">arr.T</div></pre></td></tr></table></figure></p>
<h5 id="inverse"><a href="#inverse" class="headerlink" title="inverse"></a>inverse</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy.linalg <span class="keyword">import</span> inv</div><div class="line">a = np.array([[[<span class="number">1.</span>, <span class="number">2.</span>], [<span class="number">3.</span>, <span class="number">4.</span>]], [[<span class="number">1</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">5</span>]]])</div><div class="line">inv(a)</div></pre></td></tr></table></figure>
<h6 id="transpose-amp-dot"><a href="#transpose-amp-dot" class="headerlink" title=".transpose() &amp; .dot()"></a>.transpose() &amp; .dot()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">arr = np.random.randn(<span class="number">6</span>, <span class="number">3</span>)</div><div class="line">arr</div><div class="line">np.dot(arr.T, arr) <span class="comment"># inner matrix product</span></div><div class="line"></div><div class="line">arr = np.arange(<span class="number">16</span>).reshape((<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>))</div><div class="line">arr</div><div class="line">arr.transpose((<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>))</div></pre></td></tr></table></figure>
<h4 id="File-input-and-output"><a href="#File-input-and-output" class="headerlink" title="File input and output"></a>File input and output</h4><h5 id="np-save-np-load-np-savez"><a href="#np-save-np-load-np-savez" class="headerlink" title="np.save, np.load, np.savez"></a>np.save, np.load, np.savez</h5><p><code>np.save</code> and <code>np.load</code> are the two workhorse functions for efficiently saving and loading<br>array data on disk. Arrays are saved by default in an uncompressed raw binary format<br>with file extension <code>.npy</code>.</p>
<p>When loading an <code>.npz</code> file, you get back a <code>dict-like</code> object which loads the individual arrays lazily<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">arr = np.arange(<span class="number">10</span>)</div><div class="line"><span class="comment"># Method 1. generic method</span></div><div class="line">np.save(<span class="string">'some_array'</span>, arr)</div><div class="line">np.load(<span class="string">'some_array.npy'</span>)</div><div class="line"><span class="comment"># Method 2. save in a zip archive. When loading an .npz file, you get back a dict-like object:</span></div><div class="line">np.savez(<span class="string">'array_archive.npz'</span>, a=arr, b=arr)</div><div class="line">arch = np.load(<span class="string">'array_archive.npz'</span>)</div><div class="line">arch[<span class="string">'b'</span>]</div></pre></td></tr></table></figure></p>
<h5 id="np-loadtxt"><a href="#np-loadtxt" class="headerlink" title="np.loadtxt"></a>np.loadtxt</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">arr = np.loadtxt(<span class="string">'array_ex.txt'</span>, delimiter=<span class="string">','</span>)</div><div class="line">arr</div></pre></td></tr></table></figure>
<h4 id="Linear-algebra"><a href="#Linear-algebra" class="headerlink" title="Linear algebra"></a>Linear algebra</h4><p>There is a function <code>dot</code>, both an array method, and a function in the numpy namespace, for matrix multiplication:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">x = np.array([[<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>], [<span class="number">4.</span>, <span class="number">5.</span>, <span class="number">6.</span>]])</div><div class="line">y = np.array([[<span class="number">6.</span>, <span class="number">23.</span>], [<span class="number">-1</span>, <span class="number">7</span>], [<span class="number">8</span>, <span class="number">9</span>]])</div><div class="line">x</div><div class="line">y</div><div class="line"><span class="comment"># Method 1.</span></div><div class="line">x.dot(y)</div><div class="line"><span class="comment"># Method 2.</span></div><div class="line">np.dot(x,y)</div><div class="line"></div><div class="line">np.dot(x, np.ones(<span class="number">3</span>))</div><div class="line">np.random.seed(<span class="number">12345</span>)</div></pre></td></tr></table></figure></p>
<p><code>numpy.linalg</code> has a standard set of matrix decompositions and things like inverse anddeterminant.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy.linalg <span class="keyword">import</span> inv, qr</div><div class="line">X = randn(<span class="number">5</span>, <span class="number">5</span>)</div><div class="line">mat = X.T.dot(X)</div><div class="line">inv(mat)</div><div class="line">mat.dot(inv(mat))</div><div class="line"><span class="comment"># decomposition</span></div><div class="line">q, r = qr(mat)</div><div class="line">r</div></pre></td></tr></table></figure></p>
<p>More: diag, dot, trace, det, eig, inv, pinv, qr, svd, <strong>solve</strong>, lstsq</p>
<h4 id="Case-Binning-data"><a href="#Case-Binning-data" class="headerlink" title="Case: Binning data"></a>Case: Binning data</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 1</span></div><div class="line"><span class="keyword">import</span> numpy</div><div class="line">data = numpy.random.random(<span class="number">100</span>)</div><div class="line">bins = numpy.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>)</div><div class="line">digitized = numpy.digitize(data, bins)</div><div class="line">digitized</div><div class="line">bin_means = [data[digitized == i].mean() <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(bins))]</div><div class="line">bin_means</div></pre></td></tr></table></figure>
<p>bins:<br><img src="p-basic-89.png" alt=""><br>digitized:<br><img src="p-basic-90.png" alt=""><br>bin_means:<br><img src="p-basic-91.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 2</span></div><div class="line"><span class="comment"># data</span></div><div class="line">raw_data = &#123;<span class="string">'Score'</span>: [<span class="number">25</span>, <span class="number">94</span>, <span class="number">57</span>, <span class="number">62</span>, <span class="number">70</span>, <span class="number">25</span>, <span class="number">94</span>, <span class="number">57</span>, <span class="number">62</span>, <span class="number">70</span>, <span class="number">62</span>, <span class="number">70</span>]&#125;</div><div class="line">df = DataFrame(raw_data)</div><div class="line"><span class="comment"># labels, either numeric or string</span></div><div class="line">group_names = list(np.arange(<span class="number">20</span>,<span class="number">91</span>,<span class="number">5</span>))</div><div class="line">group_bins  = np.arange(<span class="number">20</span>,<span class="number">96</span>,<span class="number">5</span>)</div><div class="line">df[<span class="string">'group'</span>] = pd.cut(df[<span class="string">'Score'</span>],group_bins,right=<span class="keyword">False</span>,labels=group_names)</div><div class="line">df</div><div class="line">dg = df[df.group==<span class="number">55</span>]</div><div class="line">dg</div><div class="line">pd.value_counts(df[<span class="string">'Score'</span>])</div></pre></td></tr></table></figure>
<p><img src="p-basic-95.png" alt=""><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">df[<span class="string">'score_binned'</span>] = pd.cut(df[<span class="string">'Score'</span>],group_bins,right=<span class="keyword">False</span>)</div><div class="line">df</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-97.png" alt=""></p>
<h4 id="Case-counting-occurrence"><a href="#Case-counting-occurrence" class="headerlink" title="Case: counting occurrence"></a>Case: counting occurrence</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> collections</div><div class="line">a = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>]</div><div class="line">counter=collections.Counter(a)</div><div class="line">print(counter)</div><div class="line"><span class="comment"># Counter(&#123;1: 4, 2: 4, 3: 2, 5: 2, 4: 1&#125;)</span></div><div class="line">print(counter.values())</div><div class="line"><span class="comment"># [4, 4, 2, 1, 2]</span></div><div class="line">print(counter.keys())</div><div class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></div><div class="line">print(counter.most_common(<span class="number">3</span>))</div><div class="line"><span class="comment"># [(1, 4), (2, 4), (3, 2)]</span></div></pre></td></tr></table></figure>
<h4 id="Case-weighted-quantile"><a href="#Case-weighted-quantile" class="headerlink" title="Case: weighted quantile"></a>Case: weighted quantile</h4><p>Reference <a href="https://stackoverflow.com/questions/21844024/weighted-percentile-using-numpy" target="_blank" rel="external">stackoverflow</a><br>Reference <a href="https://stackoverflow.com/questions/30057046/weighted-mean-in-numpy-python" target="_blank" rel="external">stackoverflow</a></p>
<h4 id="Case-Random-Walk"><a href="#Case-Random-Walk" class="headerlink" title="Case: Random Walk"></a>Case: Random Walk</h4><p>The <code>numpy.random</code> module supplements the built-in Python random with functions for<br>efficiently generating whole arrays of sample values from many kinds of probability distribution.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line">samples = np.random.normal(size=(<span class="number">4</span>, <span class="number">4</span>))</div><div class="line">samples</div></pre></td></tr></table></figure></p>
<h5 id="Method-1"><a href="#Method-1" class="headerlink" title="Method 1"></a>Method 1</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> normalvariate</div><div class="line">N = <span class="number">1000000</span></div><div class="line">%timeit samples = [normalvariate(<span class="number">0</span>, <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> xrange(N)]</div><div class="line">%timeit np.random.normal(size=N)</div></pre></td></tr></table></figure>
<p>More: seed, permutation, shuffle, rand, randint, randn, binomial, normal, beta, chisquare, gamma, uniform</p>
<p><code>xrange</code> is a sequence object that evaluates lazily. <code>range</code> creates a list, so if you do range(1, 10000000) it creates a <code>list</code> in memory with 10000000 elements. xrange is a generator, so it is a <code>sequence object</code> is a that evaluates lazily.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Example: Random Walks</span></div><div class="line"><span class="comment"># Method 1. generic way</span></div><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line">position = <span class="number">0</span> <span class="comment"># location on the y-axis overtime</span></div><div class="line">walk = [position]</div><div class="line">steps = <span class="number">1000</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> xrange(steps<span class="number">-1</span>):</div><div class="line">  step = <span class="number">1</span> <span class="keyword">if</span> random.randint(<span class="number">0</span>, <span class="number">1</span>) <span class="keyword">else</span> <span class="number">-1</span> <span class="comment"># pick a random number between 0 and 1</span></div><div class="line">  position += step</div><div class="line">  walk.append(position) <span class="comment"># append</span></div><div class="line">plt.plot(range(steps),walk)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<h5 id="Method-2"><a href="#Method-2" class="headerlink" title="Method 2"></a>Method 2</h5><p>Alternatively, use the np.random module to draw 1,000 coin flips at once, set these to 1 and -1, and compute the cumulative sum.<br>Task: <strong>First crossing time</strong>, the step at which a random walk reaches a particular value.<br>How long did it take the random walk to get at least 10 steps away from the origin 0 in either direction<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Method 2. use np.random module</span></div><div class="line">np.random.seed(<span class="number">12345</span>)</div><div class="line">nsteps = <span class="number">1000</span></div><div class="line">draws = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=nsteps) <span class="comment"># trick 1. draw an integer N from [a,b), b is not included</span></div><div class="line">steps = np.where(draws &gt; <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>) <span class="comment"># trick 2. conditioning</span></div><div class="line">walk = steps.cumsum() <span class="comment"># trick 3. cumulating</span></div><div class="line">plt.plot(range(nsteps),walk)</div><div class="line">plt.show()</div><div class="line">walk.min()</div><div class="line">walk.max()</div><div class="line">(np.abs(walk) &gt;= <span class="number">10</span>).argmax() <span class="comment"># 37 trick 4. the first True in the logical array.</span></div></pre></td></tr></table></figure></p>
<p>Turns out this can be computed using argmax, which returns the first index of the maximum value in the boolean array (<strong>True is the maximum value</strong>). Note that using argmax here is not always efficient because it always makes a full scan of the array. In this special case once a True is observed we know it to be the maximum value.</p>
<p><strong>Simulating many random walks at once</strong><br>Task: Compute the minimum crossing time to 30 or -30.<br>Hint: Compute the average of the first crossing time across histories<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">nwalks = <span class="number">5000</span></div><div class="line">nsteps = <span class="number">1000</span></div><div class="line">draws = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=(nwalks, nsteps)) <span class="comment"># 0 or 1</span></div><div class="line">steps = np.where(draws &gt; <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>)</div><div class="line">walks = steps.cumsum(<span class="number">1</span>) <span class="comment"># trick.</span></div><div class="line">walks</div><div class="line">walks.max()</div><div class="line">walks.min()</div><div class="line"></div><div class="line"><span class="comment"># Count histories that hit the level of 30</span></div><div class="line">hits30 = (np.abs(walks) &gt;= <span class="number">30</span>)</div><div class="line">hits30</div><div class="line">hits30 = (np.abs(walks) &gt;= <span class="number">30</span>).any(<span class="number">1</span>) <span class="comment"># trick 5. For each row, to check whether there is any elements of True.</span></div><div class="line">hits30</div><div class="line">hits30.shape</div><div class="line">hits30.sum()</div><div class="line"></div><div class="line"><span class="comment"># To select out the rows of walks that actually cross the absolute 30 level</span></div><div class="line">crossing_times = (np.abs(walks[hits30]) &gt;= <span class="number">30</span>).argmax(<span class="number">1</span>) <span class="comment"># trick 6.</span></div><div class="line">(np.abs(walks[hits30]) &gt;= <span class="number">30</span>)</div><div class="line">crossing_times <span class="comment"># trick 7. The first index in each history that hits the level 30 or -30</span></div><div class="line">crossing_times.mean()</div></pre></td></tr></table></figure></p>
<p>Experiment with other probablity distribution for the steps other than equal sized coin flips:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">steps = np.random.normal(loc=<span class="number">0</span>, scale=<span class="number">0.25</span>, size=(nwalks, nsteps))</div></pre></td></tr></table></figure></p>
<h3 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h3><p>Data preparation refers to cleaning, munging, wranggling, reshaping raw data.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>
<h4 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h4><p>A <code>Series</code> is an one-dimensional array-like object containing an array of data (of any NumPy data type) and an associated array of data labels, called its <code>index</code>. Compared with a regular NumPy array, you can use values in the index when selecting single values or a set of values.</p>
<h5 id="Combine-two-series-into-a-dataframe"><a href="#Combine-two-series-into-a-dataframe" class="headerlink" title="Combine two series into a dataframe"></a>Combine two series into a dataframe</h5><p>Reference <a href="https://stackoverflow.com/questions/18062135/combining-two-series-into-a-dataframe-in-pandas" target="_blank" rel="external">stackoverflow</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">obj = Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-5</span>, <span class="number">3</span>])</div><div class="line">obj</div><div class="line">obj.values <span class="comment"># array([ 4,  7, -5,  3], dtype=int64)</span></div><div class="line">obj.index <span class="comment"># RangeIndex(start=0, stop=4, step=1)</span></div><div class="line"><span class="comment"># Create a series with an index indentifying each data point.</span></div><div class="line">obj2 = Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-5</span>, <span class="number">3</span>], index=[<span class="string">'d'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>])</div><div class="line">obj2</div><div class="line">obj2.index</div><div class="line">obj2[<span class="string">'a'</span>]</div><div class="line">obj2[<span class="string">'d'</span>] = <span class="number">6</span></div><div class="line">obj2</div></pre></td></tr></table></figure>
<p><img src="p-basic-10.png" alt=""></p>
<p>NumPy array operations, such as filtering with a boolean array, scalar multiplication,<br>or applying math functions, will preserve the index-value link:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">obj2</div><div class="line">obj2[[<span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'d'</span>]]</div><div class="line">obj2[obj2 &gt; <span class="number">0</span>]</div><div class="line">obj2 * <span class="number">2</span></div><div class="line">np.exp(obj2)</div><div class="line">obj2</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-11.png" alt=""></p>
<p>Another way to think about a Series is as a fixed-length, <code>ordered dict</code>, as it is a mapping<br>of index values to data values.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">'b'</span> <span class="keyword">in</span> obj2</div><div class="line"><span class="string">'e'</span> <span class="keyword">in</span> obj2</div></pre></td></tr></table></figure></p>
<p><strong>When to use series.</strong> If you have data contained in a Python dict, you can create a Series from it by passing the dict:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sdata = &#123;<span class="string">'Ohio'</span>: <span class="number">35000</span>, <span class="string">'Texas'</span>: <span class="number">71000</span>, <span class="string">'Oregon'</span>: <span class="number">16000</span>, <span class="string">'Utah'</span>: <span class="number">5000</span>&#125;</div><div class="line">obj3 = Series(sdata)</div><div class="line">obj3</div><div class="line">states = [<span class="string">'California'</span>, <span class="string">'Ohio'</span>, <span class="string">'Oregon'</span>, <span class="string">'Texas'</span>]</div><div class="line">obj4 = Series(sdata, index=states)</div><div class="line">obj4</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-12.png" alt=""></p>
<p>When only passing a dict, the index in the resulting Series will have the dict’s keys in sorted order. In this case, 3 values found in <em>sdata</em> were placed in the appropriate locations, but since no value for ‘California’ was found, it appears as <code>NaN</code> (not a number) which is considered in pandas to mark missing or NA values.</p>
<h5 id="isnull-amp-notnull"><a href="#isnull-amp-notnull" class="headerlink" title="isnull() &amp; notnull()"></a>isnull() &amp; notnull()</h5><p>The isnull and notnull functions in pandas should be used to detect missing data:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">pd.isnull(obj4)</div><div class="line">pd.notnull(obj4) <span class="comment"># reverse of the answer in last line</span></div><div class="line">obj4.isnull() <span class="comment"># Series has its own isnull method</span></div><div class="line">obj3</div><div class="line">obj4 <span class="comment"># Utah is screened out from obj4 because `Utah` is considered when obj4 is created.</span></div><div class="line"><span class="comment"># any NaN ruins the operations.</span></div><div class="line">(obj3 + obj4).index <span class="comment"># Index([u'California', u'Ohio', u'Oregon', u'Texas', u'Utah'], dtype='object')</span></div><div class="line">(obj3 + obj4).values <span class="comment"># array([     nan,   70000.,   32000.,  142000.,      nan]) # Two NaN show.</span></div></pre></td></tr></table></figure></p>
<p><img src="p-basic-14.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Both the Series object itself and its index have a name attribute, which integrates with other key areas of pandas functionality.</span></div><div class="line">obj4.name = <span class="string">'population'</span></div><div class="line">obj4.index.name = <span class="string">'state'</span></div><div class="line">obj4</div></pre></td></tr></table></figure>
<p><img src="p-basic-15.png" alt=""></p>
<h5 id="indexing"><a href="#indexing" class="headerlink" title="indexing"></a>indexing</h5><p>Series indexing (obj[…]) works analogously to NumPy array indexing, except you can use the Series’s index values instead of only integers.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Indexing, selection, and filtering</span></div><div class="line">obj = Series(np.arange(<span class="number">4.</span>), index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])</div><div class="line">obj</div><div class="line">obj[<span class="string">'b'</span>]</div><div class="line">obj[<span class="number">1</span>]</div><div class="line">obj[<span class="number">2</span>:<span class="number">4</span>]</div><div class="line">obj[[<span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'d'</span>]] <span class="comment"># reordering</span></div><div class="line">obj[[<span class="number">1</span>, <span class="number">3</span>]]</div><div class="line">obj[obj &lt; <span class="number">2</span>]</div><div class="line">obj[<span class="string">'b'</span>:<span class="string">'c'</span>]</div><div class="line">obj[<span class="string">'b'</span>:<span class="string">'c'</span>] = <span class="number">5</span></div><div class="line">obj</div></pre></td></tr></table></figure></p>
<p>A Series’s index can be altered in place by assignment:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">obj = Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-5</span>, <span class="number">3</span>])</div><div class="line">obj.index = [<span class="string">'Bob'</span>, <span class="string">'Steve'</span>, <span class="string">'Jeff'</span>, <span class="string">'Ryan'</span>]</div><div class="line">obj</div></pre></td></tr></table></figure></p>
<h5 id="element-wise-operations"><a href="#element-wise-operations" class="headerlink" title="element-wise operations"></a>element-wise operations</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## reindex method, xs method, icol, irow methods, get_value and set_value method</span></div><div class="line"><span class="comment"># Arithmetic, data alignment, value filling</span></div><div class="line"></div><div class="line">s1 = Series([<span class="number">7.3</span>, <span class="number">-2.5</span>, <span class="number">3.4</span>, <span class="number">1.5</span>], index=[<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>])</div><div class="line">s2 = Series([<span class="number">-2.1</span>, <span class="number">3.6</span>, <span class="number">-1.5</span>, <span class="number">4</span>, <span class="number">3.1</span>], index=[<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>])</div><div class="line">s1</div><div class="line">s2</div><div class="line"><span class="comment"># The internal data alignment introduces NA values in the indices that don’t overlap.</span></div><div class="line">s1 + s2</div></pre></td></tr></table></figure>
<h4 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h4><p>The DataFrame has both a row and column index; it can be thought of as a dict of Series, each of which can be a different value type (numeric, string, boolean, etc.). The resulting DataFrame will have its index assigned automatically as with Series, and the columns are placed in sorted order.</p>
<h5 id="Read-index-column-from-csv"><a href="#Read-index-column-from-csv" class="headerlink" title="Read index column from csv"></a>Read index column from csv</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df = pd.read_csv(<span class="string">'share_net_worth_rich2poor.csv'</span>, index_col=<span class="number">0</span> ) <span class="comment"># column 1 refers to the first column, so 0 refers to the location of index.</span></div></pre></td></tr></table></figure>
<h5 id="Convert-DataFrame-to-Narray-preserving-index"><a href="#Convert-DataFrame-to-Narray-preserving-index" class="headerlink" title="Convert DataFrame to Narray preserving index"></a>Convert DataFrame to Narray preserving index</h5><p>Reference <a href="https://stackoverflow.com/questions/13187778/convert-pandas-dataframe-to-numpy-array-preserving-index" target="_blank" rel="external">stackoverflow</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">data = &#123;<span class="string">'state'</span>: [<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>], <span class="string">'year'</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>], <span class="string">'pop'</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>]&#125;</div><div class="line">frame = DataFrame(data)</div><div class="line">frame</div><div class="line"><span class="comment"># rearrange the order of columns</span></div><div class="line">DataFrame(data, columns=[<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div></pre></td></tr></table></figure>
<p><img src="p-basic-48.png" alt=""></p>
<h5 id="Blank-data-frame"><a href="#Blank-data-frame" class="headerlink" title="Blank data frame"></a>Blank data frame</h5><p>As with Series, if you pass a column that isn’t contained in data, it will appear with NA values in the result:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># column names and index</span></div><div class="line">frame2 = DataFrame(data, columns=[<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>, <span class="string">'debt'</span>], index=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</div><div class="line">frame2</div><div class="line"><span class="comment"># only column names</span></div><div class="line">frame3 = DataFrame(data, columns=[<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>, <span class="string">'debt'</span>])</div><div class="line">frame3</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-49.png" alt=""></p>
<h5 id="Access-sort-values"><a href="#Access-sort-values" class="headerlink" title="Access sort_values"></a>Access sort_values</h5><p>Reference <a href="https://stackoverflow.com/questions/30813088/pandas-how-to-get-scalar-value-on-a-cell-using-conditional-indexing" target="_blank" rel="external">stackoverflow</a></p>
<h5 id="Replacing-values"><a href="#Replacing-values" class="headerlink" title="Replacing values"></a>Replacing values</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">df = DataFrame(np.arange(<span class="number">9</span>).reshape([<span class="number">3</span>,<span class="number">3</span>]),columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])</div><div class="line">df</div><div class="line">dg = DataFrame(np.where(df&gt;<span class="number">4</span>,df*<span class="number">10</span>,df),columns=df.columns)</div><div class="line">dg</div></pre></td></tr></table></figure>
<p><img src="p-basic-99.png" alt=""></p>
<h5 id="Reverse-the-row-order"><a href="#Reverse-the-row-order" class="headerlink" title="Reverse the row order"></a>Reverse the row order</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">reversed_df = df.iloc[::<span class="number">-1</span>]</div></pre></td></tr></table></figure>
<h5 id="Get-dummy-variables"><a href="#Get-dummy-variables" class="headerlink" title="Get dummy variables"></a>Get dummy variables</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df = pd.concat([df, pd.get_dummies(df[<span class="string">'YEAR'</span>])], axis=<span class="number">1</span>); df</div></pre></td></tr></table></figure>
<h5 id="Pandas-indexing"><a href="#Pandas-indexing" class="headerlink" title="Pandas indexing"></a>Pandas indexing</h5><h6 id="with-Series"><a href="#with-Series" class="headerlink" title="with Series"></a>with Series</h6><p>If you assign a Series to a column, it will be instead conformed exactly to the DataFrame’s index, inserting missing values in any holes:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">val = Series([<span class="number">-1.2</span>, <span class="number">-1.5</span>, <span class="number">-1.7</span>], index=[<span class="string">'two'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>]) <span class="comment"># a series</span></div><div class="line">frame2[<span class="string">'debt'</span>] = val</div><div class="line">frame2</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-50.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">frame2[<span class="string">'debt'</span>] = <span class="number">16.5</span></div><div class="line">frame2</div><div class="line">frame2[<span class="string">'debt'</span>] = np.arange(<span class="number">5.</span>)</div><div class="line">frame2</div></pre></td></tr></table></figure>
<p><img src="p-basic-54.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">frame2[:<span class="number">2</span>]</div><div class="line">frame2[frame2[<span class="string">'pop'</span>]&gt;<span class="number">2.</span>]</div></pre></td></tr></table></figure>
<p><img src="p-basic-58.png" alt=""></p>
<h5 id="Rearrange-columns"><a href="#Rearrange-columns" class="headerlink" title="Rearrange columns"></a>Rearrange columns</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># continued</span></div><div class="line">cols = frame2.columns.tolist()</div><div class="line">cols <span class="comment"># ['year', 'state', 'pop', 'debt']</span></div><div class="line"><span class="comment"># Suppose we want to moved the last element to the first position:</span></div><div class="line">cols = cols[<span class="number">-1</span>:] + cols[:<span class="number">-1</span>]</div><div class="line">cols <span class="comment"># ['debt', 'year', 'state', 'pop']</span></div><div class="line">frame2 = frame2[cols]</div><div class="line">frame2</div></pre></td></tr></table></figure>
<p>Incase the pops up the error message, “cannot concatenate ‘str’ and ‘list’ objects.” Make sure you bracket, i.e., [] the str value in cols: cols = [cols[7]] + cols[:7] + cols[8:].<br><img src="p-basic-60.png" alt=""></p>
<h5 id="Keep-slice-columns"><a href="#Keep-slice-columns" class="headerlink" title="Keep/slice columns"></a>Keep/slice columns</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">df = pd.DataFrame(np.random.randn(<span class="number">3</span>,<span class="number">6</span>))</div><div class="line">df</div><div class="line">df[list(df.columns[:<span class="number">2</span>]) + [<span class="number">4</span>]]</div></pre></td></tr></table></figure>
<p><img src="p-basic-88.png" alt=""></p>
<h5 id="Pandas-conditional-indexing"><a href="#Pandas-conditional-indexing" class="headerlink" title="Pandas conditional indexing"></a>Pandas conditional indexing</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># display row entries</span></div><div class="line">frame2.loc[<span class="string">'two'</span>] <span class="comment"># show rows. as opposed to the command to show columns, ex: frame2['year']</span></div><div class="line">frame2.loc[frame2.state==<span class="string">"Ohio"</span>, <span class="string">"pop"</span>] = <span class="number">-10.</span> <span class="comment"># show by bool</span></div><div class="line">frame2</div></pre></td></tr></table></figure>
<p><img src="p-basic-55.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">data = DataFrame(np.arange(<span class="number">16</span>).reshape((<span class="number">4</span>, <span class="number">4</span>)), index=[<span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>, <span class="string">'Utah'</span>, <span class="string">'New York'</span>], columns=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>])</div><div class="line">data</div><div class="line"><span class="comment"># Method 1. use single label, and a list of labels</span></div><div class="line">data.loc[<span class="string">'Colorado'</span>, [<span class="string">'two'</span>, <span class="string">'three'</span>]]</div><div class="line"><span class="comment"># Method 2. use numeric index and colon</span></div><div class="line">data.iloc[<span class="number">2</span>,:]</div><div class="line"><span class="comment"># Method 3. colon works with "single" label</span></div><div class="line">data.loc[:<span class="string">'Utah'</span>, <span class="string">'two'</span>]</div><div class="line"><span class="comment"># Method 4. choose all the columns</span></div><div class="line">data.loc[:<span class="string">'Utah'</span>,data.columns]</div></pre></td></tr></table></figure>
<p><img src="p-basic-93.png" alt=""></p>
<p><strong>Application of index &amp; loc</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># to replicate the result from data.ix(data.three&gt;5,:3)</span></div><div class="line">data.index[data.three &gt; <span class="number">5</span>] <span class="comment"># Index(['Colorado', 'Utah', 'New York'], dtype='object')</span></div><div class="line">data.index[data.three &gt; <span class="number">5</span>].tolist() <span class="comment"># ['Colorado', 'Utah', 'New York']</span></div><div class="line"><span class="comment"># to show conditional data</span></div><div class="line">data.loc[data.index[data.three &gt; <span class="number">5</span>].tolist(), data.columns[:<span class="number">3</span>]] <span class="comment"># tricky.!! Method 1</span></div></pre></td></tr></table></figure></p>
<p><img src="p-basic-19.png" alt=""></p>
<p><strong>Application using np.where &amp; iloc</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">dx1 = list(np.where(data.three&gt;<span class="number">5</span>)[<span class="number">0</span>]) <span class="comment"># The tricky thing is we need [0].!!!!!!! Otherwise, it doesn't work.</span></div><div class="line"></div><div class="line">data.iloc[dx1,[<span class="number">1</span>,<span class="number">2</span>]] <span class="comment"># tricky.!! Method 2.</span></div><div class="line">data.iloc[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">2</span>]]</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-20.png" alt=""></p>
<p><strong>Application of complex conditions</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">data</div><div class="line"><span class="comment"># One &gt; 9 and Three &gt;15</span></div><div class="line">(data[<span class="string">"one"</span>]&lt;=<span class="number">9</span>)&amp;(data[<span class="string">"three"</span>]&lt;=<span class="number">15</span>)</div><div class="line">data.loc[(data[<span class="string">"one"</span>]&lt;=<span class="number">9</span>)&amp;(data[<span class="string">"three"</span>]&lt;=<span class="number">15</span>), <span class="string">"four"</span> ]</div><div class="line"></div><div class="line"><span class="comment"># Note: data.loc[data["one"]&lt;=9&amp;data["three"]&lt;=15, "four" ] doesn't work, because</span></div><div class="line"><span class="comment"># you need to put in parenthesis.</span></div></pre></td></tr></table></figure></p>
<p><img src="p-basic-61.png" alt=""><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">data.loc[(data[<span class="string">"one"</span>]&lt;=<span class="number">9</span>)&amp;(data[<span class="string">"three"</span>]&lt;=<span class="number">15</span>), <span class="string">"four"</span> ] *= <span class="number">10</span></div><div class="line">data</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-62.png" alt=""></p>
<p>If you have multiple values you want to include, put them in a list (or more generally, any iterable):<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">data.loc[data[<span class="string">'one'</span>].isin([<span class="number">4</span>,<span class="number">8</span>])]</div><div class="line">data.loc[~data[<span class="string">'one'</span>].isin([<span class="number">4</span>,<span class="number">8</span>])]</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-64.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">temp = data.query(<span class="string">'one&lt;=9 &amp; three&lt;=15'</span>)</div><div class="line">temp</div></pre></td></tr></table></figure>
<p>Reference: <a href="https://stackoverflow.com/questions/17071871/select-rows-from-a-dataframe-based-on-values-in-a-column-in-pandas" target="_blank" rel="external">stackoverflow</a></p>
<h5 id="Rename-columns"><a href="#Rename-columns" class="headerlink" title="Rename columns"></a>Rename columns</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">data = DataFrame(np.arange(<span class="number">16</span>).reshape((<span class="number">4</span>, <span class="number">4</span>)), index=[<span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>, <span class="string">'Utah'</span>, <span class="string">'New York'</span>], columns=[<span class="string">'price1'</span>, <span class="string">'price2'</span>, <span class="string">'price3'</span>, <span class="string">'volume'</span>])</div><div class="line">data</div><div class="line">data.rename(columns=&#123;<span class="string">'price1'</span>:<span class="string">'Price-A'</span>,<span class="string">'price2'</span>:<span class="string">'Price-B'</span>,<span class="string">'price3'</span>:<span class="string">'Price-C'</span>&#125;,inplace=<span class="keyword">True</span>)</div><div class="line">data</div></pre></td></tr></table></figure>
<p><img src="p-basic-92.png" alt=""></p>
<h5 id="Lowercase-columns"><a href="#Lowercase-columns" class="headerlink" title="Lowercase columns"></a>Lowercase columns</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># continued</span></div><div class="line"><span class="comment"># method 1</span></div><div class="line">data.columns = map(str.lower,data.columns)</div><div class="line"><span class="comment"># or equivalently, data.columns = data.columns.str.lower()</span></div><div class="line">data</div><div class="line"><span class="comment"># method 2</span></div><div class="line">data.columns = [x.lower() <span class="keyword">for</span> x <span class="keyword">in</span> data.columns]</div></pre></td></tr></table></figure>
<p><img src="p-basic-100.png" alt=""></p>
<h5 id="Drop-names-with-prefix"><a href="#Drop-names-with-prefix" class="headerlink" title="Drop names with prefix"></a>Drop names with prefix</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">data = DataFrame(np.arange(<span class="number">16</span>).reshape((<span class="number">4</span>, <span class="number">4</span>)), index=[<span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>, <span class="string">'Utah'</span>, <span class="string">'New York'</span>], columns=[<span class="string">'price1'</span>, <span class="string">'price2'</span>, <span class="string">'price3'</span>, <span class="string">'volume'</span>])</div><div class="line">data</div><div class="line"><span class="comment"># Show column names</span></div><div class="line">data.columns <span class="comment"># Index(['price1', 'price2', 'price3', 'volume'], dtype='object')</span></div><div class="line"><span class="comment"># method 1. use a list of columns to keep.</span></div><div class="line">cols = [c <span class="keyword">for</span> c <span class="keyword">in</span> data.columns <span class="keyword">if</span> c.lower()[:<span class="number">5</span>]!=<span class="string">'price'</span>] <span class="comment"># ['volume']</span></div><div class="line">data1 = data[cols]</div><div class="line">data1</div><div class="line"><span class="comment"># method 2. use 'difference' to remove columns prefixed with 'price'</span></div><div class="line">data2 = data[data.columns.difference([c <span class="keyword">for</span> c <span class="keyword">in</span> data.columns <span class="keyword">if</span> c.lower()[:<span class="number">5</span>]==<span class="string">'price'</span>])]</div><div class="line">data2</div></pre></td></tr></table></figure>
<p><img src="p-basic-71.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># method 3.</span></div><div class="line">my_cols = set(data.columns)</div><div class="line">new_cols = &#123;x <span class="keyword">for</span> x <span class="keyword">in</span> my_cols <span class="keyword">if</span> <span class="string">"price"</span> <span class="keyword">not</span> <span class="keyword">in</span> x&#125;</div><div class="line">data3 = data[list(new_cols)]</div><div class="line">data3</div></pre></td></tr></table></figure>
<p><img src="p-basic-72.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 2 (continued)</span></div><div class="line">data2 = data[data.columns.drop(list(data.filter(regex=<span class="string">'price'</span>)))]</div><div class="line"><span class="comment"># method 3</span></div><div class="line"><span class="keyword">import</span> re</div><div class="line">data3 = data.select(<span class="keyword">lambda</span> x: <span class="keyword">not</span> re.search(<span class="string">'price\d+'</span>,x),axis=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h5 id="DataFrame-math"><a href="#DataFrame-math" class="headerlink" title="DataFrame math"></a>DataFrame math</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">df1 = DataFrame(np.arange(<span class="number">9.</span>).reshape((<span class="number">3</span>, <span class="number">3</span>)), columns=list(<span class="string">'bcd'</span>), index=[<span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Colorado'</span>])</div><div class="line">df2 = DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)), columns=list(<span class="string">'bde'</span>), index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>])</div><div class="line">df1</div><div class="line">df2</div><div class="line">df1 + df2</div></pre></td></tr></table></figure>
<p><img src="p-basic-21.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Arithmetic methods with fill values</span></div><div class="line">df1 = DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">3</span>, <span class="number">4</span>)), columns=list(<span class="string">'abcd'</span>))</div><div class="line">df2 = DataFrame(np.arange(<span class="number">20.</span>).reshape((<span class="number">4</span>, <span class="number">5</span>)), columns=list(<span class="string">'abcde'</span>))</div><div class="line">df1</div><div class="line">df2</div><div class="line"><span class="comment"># Adding these together results in NA values in the locations that don’t overlap:</span></div><div class="line">df1 + df2</div></pre></td></tr></table></figure>
<p><img src="p-basic-80.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># Using the add method on df1, I pass df2 and an argument to fill_value:</span></div><div class="line">df1.add(df2, fill_value=<span class="number">0</span>)</div><div class="line">df2 = df1.reindex(columns=df2.columns, fill_value=<span class="number">0</span>)</div><div class="line">df2</div><div class="line"><span class="comment"># Use sub and specify axis=0 (to consider the row indices when matching up labels instead of the column indices as is the default)</span></div><div class="line"><span class="comment"># Here we want to subtract the values in c from its counterparts in a and b</span></div><div class="line">df2[[<span class="string">'a'</span>,<span class="string">'b'</span>]].sub(df2[<span class="string">'c'</span>],axis=<span class="number">0</span>)</div></pre></td></tr></table></figure>
<p><img src="p-basic-81.png" alt=""><br>More: add, sub, div, mul</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Operations between DataFrame and Series</span></div><div class="line">arr = np.arange(<span class="number">12.</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</div><div class="line">arr</div><div class="line">arr[<span class="number">0</span>]</div><div class="line">arr - arr[<span class="number">0</span>]</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">frame = DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)), columns=list(<span class="string">'bde'</span>), index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>])</div><div class="line">series = frame.iloc[<span class="number">0</span>]</div><div class="line">frame</div><div class="line">series</div><div class="line"><span class="comment"># By default, arithmetic between DataFrame and Series matches the index of the Series on the DataFrame's columns, broadcasting down the rows:</span></div><div class="line">frame - series</div></pre></td></tr></table></figure>
<p><img src="p-basic-24.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">series2 = Series(range(<span class="number">3</span>), index=[<span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>])</div><div class="line">series2</div><div class="line"><span class="comment"># If an index value is not found in either the DataFrame’s columns or the Series’s index, the objects will be reindexed to form the union:</span></div><div class="line">frame + series2</div><div class="line"><span class="comment"># If you want to instead broadcast over the columns, "matching on the rows", you have to use one of the arithmetic methods.</span></div><div class="line">series3 = frame[<span class="string">'d'</span>]</div><div class="line">series3</div><div class="line">frame</div></pre></td></tr></table></figure>
<p><img src="p-basic-36.png" alt=""><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">series3</div><div class="line">frame.sub(series3, axis=<span class="number">0</span>)</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-37.png" alt=""></p>
<h5 id="Delete-np-nan"><a href="#Delete-np-nan" class="headerlink" title="Delete np.nan"></a>Delete np.nan</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data set</span></div><div class="line">df01 = frame + series2</div><div class="line">df01</div><div class="line">df01.loc[<span class="string">'Ohio'</span>,<span class="string">'d'</span>] = <span class="number">1</span></div><div class="line">df01</div><div class="line">df01 = df01[np.isfinite(df01[<span class="string">'d'</span>])]</div><div class="line">df01</div></pre></td></tr></table></figure>
<p><img src="p-basic-38.png" alt=""></p>
<h5 id="Delete-a-column"><a href="#Delete-a-column" class="headerlink" title="Delete a column"></a>Delete a column</h5><p>Add or delete a column from a DataFrame.</p>
<h6 id="del"><a href="#del" class="headerlink" title="del"></a>del</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">frame2[<span class="string">'eastern'</span>] = frame2.state == <span class="string">'Ohio'</span></div><div class="line">frame2</div><div class="line"><span class="keyword">del</span> frame2[<span class="string">'eastern'</span>]</div><div class="line">frame2.columns</div></pre></td></tr></table></figure>
<p>Note the column returned when indexing a DataFrame is a view on the underlying data, not a copy. Thus, any in-place modifications to the Series will be reflected in the DataFrame. The column can be explicitly copied using the Series’s copy method.</p>
<h6 id="drop"><a href="#drop" class="headerlink" title="drop()"></a>drop()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Dropping entries from an axis</span></div><div class="line">obj = Series(np.arange(<span class="number">5.</span>), index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>])</div><div class="line">new_obj = obj.drop(<span class="string">'c'</span>)</div><div class="line">new_obj</div><div class="line">obj.drop([<span class="string">'d'</span>, <span class="string">'c'</span>])</div></pre></td></tr></table></figure>
<p><img src="p-basic34.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">data = DataFrame(np.arange(<span class="number">16</span>).reshape((<span class="number">4</span>, <span class="number">4</span>)), index=[<span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>, <span class="string">'Utah'</span>, <span class="string">'New York'</span>], columns=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>])</div><div class="line">data.drop([<span class="string">'Colorado'</span>, <span class="string">'Ohio'</span>])</div><div class="line">data.drop(<span class="string">'two'</span>, axis=<span class="number">1</span>) <span class="comment"># delete it from columns</span></div><div class="line">data.drop([<span class="string">'two'</span>, <span class="string">'four'</span>], axis=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p><img src="p-basic35.png" alt=""></p>
<h5 id="Nested-dict-inputs"><a href="#Nested-dict-inputs" class="headerlink" title="Nested dict inputs"></a>Nested dict inputs</h5><p>When a <code>nested dict</code> is passed to DataFrame, it will interpret the <code>outer</code> dict keys of the passed data as the <code>columns</code> and the inner keys as the row indices. The keys in the inner dicts are unioned and sorted to form the index in the result. This rule isn’t true if an explicit index is specified:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">pop = &#123;<span class="string">'Nevada'</span>: &#123;<span class="number">2001</span>: <span class="number">2.4</span>, <span class="number">2002</span>: <span class="number">2.9</span>&#125;, <span class="string">'Ohio'</span>: &#123;<span class="number">2000</span>: <span class="number">1.5</span>, <span class="number">2001</span>: <span class="number">1.7</span>, <span class="number">2002</span>: <span class="number">3.6</span>&#125;&#125;</div><div class="line">frame3 = DataFrame(pop)</div><div class="line">frame3</div><div class="line">frame3.T</div><div class="line"><span class="comment"># The keys in the inner dicts are unioned and sorted</span></div><div class="line">DataFrame(pop, index=[<span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>])</div></pre></td></tr></table></figure></p>
<h5 id="Subset-by-rows"><a href="#Subset-by-rows" class="headerlink" title="Subset by rows"></a>Subset by rows</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">pop = &#123;<span class="string">'Nevada'</span>: &#123;<span class="number">2001</span>: <span class="number">2.4</span>, <span class="number">2002</span>: <span class="number">2.9</span>&#125;, <span class="string">'Ohio'</span>: &#123;<span class="number">2000</span>: <span class="number">1.5</span>, <span class="number">2001</span>: <span class="number">1.7</span>, <span class="number">2002</span>: <span class="number">3.6</span>&#125;&#125;</div><div class="line">frame3 = DataFrame(pop)</div><div class="line">frame3</div><div class="line">pdata = &#123;<span class="string">'Ohio'</span>: frame3[<span class="string">'Ohio'</span>][:<span class="number">-1</span>], <span class="string">'Nevada'</span>: frame3[<span class="string">'Nevada'</span>][:<span class="number">2</span>]&#125;</div><div class="line">DataFrame(pdata)</div></pre></td></tr></table></figure>
<p><img src="p-basic-59.png" alt=""></p>
<h5 id="name-amp-value-attributes"><a href="#name-amp-value-attributes" class="headerlink" title="name &amp; value attributes"></a>name &amp; value attributes</h5><p>If a DataFrame’s index and columns have their name attributes set, these will also be displayed:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line">frame3.index.name = <span class="string">'year'</span></div><div class="line">frame3.columns.name = <span class="string">'state'</span></div><div class="line">frame3</div><div class="line">frame3.values</div><div class="line">frame2</div><div class="line">frame2.values</div></pre></td></tr></table></figure></p>
<h5 id="Index-immutable"><a href="#Index-immutable" class="headerlink" title="Index immutable"></a>Index immutable</h5><p>Any array or other sequence of labels used when constructing a Series or DataFrame is internally converted to an Index. In addition to being array-like, an Index also functions as a fixed-size set:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line">obj = Series(range(<span class="number">3</span>), index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</div><div class="line">index = obj.index</div><div class="line">index</div><div class="line">obj = Series(np.arange(<span class="number">3</span>), index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</div><div class="line">index = obj.index</div><div class="line">index</div><div class="line">index[<span class="number">1</span>:]</div><div class="line">index[<span class="number">1</span>] = <span class="string">'d'</span> <span class="comment"># Error!! Index objects are immutable</span></div><div class="line">index = pd.Index(np.arange(<span class="number">3</span>))</div><div class="line">obj2 = Series([<span class="number">1.5</span>, <span class="number">-2.5</span>, <span class="number">0</span>], index=index)</div><div class="line">obj2.index <span class="keyword">is</span> index</div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">pop = &#123;<span class="string">'Nevada'</span>: &#123;<span class="number">2001</span>: <span class="number">2.4</span>, <span class="number">2002</span>: <span class="number">2.9</span>&#125;, <span class="string">'Ohio'</span>: &#123;<span class="number">2000</span>: <span class="number">1.5</span>, <span class="number">2001</span>: <span class="number">1.7</span>, <span class="number">2002</span>: <span class="number">3.6</span>&#125;&#125;</div><div class="line">frame3 = DataFrame(pop)</div><div class="line">frame3</div><div class="line"><span class="string">'Ohio'</span> <span class="keyword">in</span> frame3.columns</div><div class="line"><span class="number">2003</span> <span class="keyword">in</span> frame3.index</div></pre></td></tr></table></figure>
<h5 id="Index-as-a-set"><a href="#Index-as-a-set" class="headerlink" title="Index as a set"></a>Index as a set</h5><h6 id="reindex"><a href="#reindex" class="headerlink" title="reindex"></a>reindex</h6><p>To create a new object with the data conformed to a new index:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">obj = Series([<span class="number">4.5</span>, <span class="number">7.2</span>, <span class="number">-5.3</span>, <span class="number">3.6</span>], index=[<span class="string">'d'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>])</div><div class="line">obj</div><div class="line">obj2 = obj.reindex([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>])</div><div class="line">obj2</div><div class="line">obj.reindex([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>], fill_value=<span class="number">0</span>)</div></pre></td></tr></table></figure></p>
<p>More: append, diff, intersection, union, isin, delete, drop, insert, is_monotonic, is_unique, unique</p>
<h6 id="set-index-amp-reset-index"><a href="#set-index-amp-reset-index" class="headerlink" title="set_index &amp; reset_index"></a>set_index &amp; reset_index</h6><p>It’s not unusual to want to use one or more columns from a DataFrame as the row index; alternatively, you may wish to move the row index into the DataFrame’s columns.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Using a DataFrame's columns</span></div><div class="line">frame = DataFrame(&#123;<span class="string">'a'</span>: range(<span class="number">7</span>), <span class="string">'b'</span>: range(<span class="number">7</span>, <span class="number">0</span>, <span class="number">-1</span>), <span class="string">'c'</span>: [<span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>], <span class="string">'d'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</div><div class="line">frame</div><div class="line">frame2 = frame.set_index([<span class="string">'c'</span>, <span class="string">'d'</span>])</div><div class="line">frame2</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-26.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># By default the columns used for creating indices are removed from the DataFrame, though you can leave them in:</span></div><div class="line">frame.set_index([<span class="string">'c'</span>, <span class="string">'d'</span>], drop=<span class="keyword">False</span>)</div><div class="line">frame2.reset_index(inplace=<span class="keyword">True</span>)</div><div class="line">frame2</div></pre></td></tr></table></figure>
<p><img src="p-basic-27.png" alt=""></p>
<h5 id="Interpolation"><a href="#Interpolation" class="headerlink" title="Interpolation"></a>Interpolation</h5><p>For ordered data like time series, it may be desirable to do some interpolation or filling of values when reindexing. The method option allows us to do this, using a method such as ffill which <code>forward fills</code> the values:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">obj3 = Series([<span class="string">'blue'</span>, <span class="string">'purple'</span>, <span class="string">'yellow'</span>], index=[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>])</div><div class="line">obj3.reindex(range(<span class="number">6</span>), method=<span class="string">'ffill'</span>)</div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">frame = DataFrame(np.arange(<span class="number">9</span>).reshape((<span class="number">3</span>, <span class="number">3</span>)), index=[<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>], columns=[<span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'California'</span>])</div><div class="line">frame</div><div class="line">frame2 = frame.reindex([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])</div><div class="line">frame2</div><div class="line">states = [<span class="string">'Texas'</span>, <span class="string">'Utah'</span>, <span class="string">'California'</span>]</div><div class="line">frame.reindex(columns=states)</div><div class="line">frame.loc[[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>], states]</div><div class="line"><span class="comment"># It doesn't work.</span></div><div class="line">frame.reindex(index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>], method=<span class="string">'ffill'</span>, columns=states)</div></pre></td></tr></table></figure>
<p>More: index, method, fill_value, limit, level, copy</p>
<h5 id="Apply-a-function"><a href="#Apply-a-function" class="headerlink" title="Apply a function"></a>Apply a function</h5><p>NumPy’s element-wise array methods work fine with pandas objects such as DataFrame and Series.</p>
<h6 id="apply-attribute-of-Series"><a href="#apply-attribute-of-Series" class="headerlink" title="apply: attribute of Series"></a>apply: attribute of Series</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data set</span></div><div class="line">frame = DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">3</span>), index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>], columns=list(<span class="string">'bde'</span>))</div><div class="line">frame</div><div class="line">np.abs(frame)</div></pre></td></tr></table></figure>
<p><img src="p-basic-30.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 1</span></div><div class="line">f = <span class="keyword">lambda</span> x: x.max() - x.min()</div><div class="line"><span class="comment"># apply a function on 1D arrays to each row</span></div><div class="line">frame.apply(f) <span class="comment"># Over rows, degenerate to a column vector</span></div><div class="line">frame.apply(f, axis=<span class="number">1</span>) <span class="comment"># Over columns, degenerate to a row vector</span></div></pre></td></tr></table></figure>
<p><img src="p-basic-31.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 2</span></div><div class="line"><span class="comment"># The function passed to apply need not return a scalar value, it can also return a Series with multiple values:</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span> <span class="keyword">return</span> Series([x.min(), x.max()], index=[<span class="string">'min'</span>, <span class="string">'max'</span>])</div><div class="line">frame.apply(f)</div></pre></td></tr></table></figure>
<p><img src="p-basic-32.png" alt=""></p>
<h6 id="apply-on-multiple-columns"><a href="#apply-on-multiple-columns" class="headerlink" title="apply on multiple columns"></a>apply on multiple columns</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sublst</span><span class="params">(row)</span>:</span></div><div class="line">    <span class="keyword">return</span> lst[row[<span class="string">'J1'</span>]:row[<span class="string">'J2'</span>]]</div><div class="line"></div><div class="line">df = pd.DataFrame(&#123;<span class="string">'ID'</span>:[<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>], <span class="string">'J1'</span>: [<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="string">'J2'</span>:[<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>]&#125;)</div><div class="line">df</div><div class="line">lst = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>,<span class="string">'f'</span>]</div><div class="line"></div><div class="line">df[<span class="string">'J3'</span>] = df.apply(sublst,axis=<span class="number">1</span>)</div><div class="line">df</div></pre></td></tr></table></figure>
<p><img src="p-basic-75.png" alt=""></p>
<h6 id="apply-multiple-functions"><a href="#apply-multiple-functions" class="headerlink" title="apply : multiple functions"></a>apply : multiple functions</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">gunc</span><span class="params">(a,b)</span>:</span></div><div class="line">  <span class="keyword">return</span> a*b</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(x)</span>:</span></div><div class="line">  <span class="keyword">return</span> gunc(x[<span class="string">'J1'</span>],x[<span class="string">'J2'</span>])</div><div class="line">df[<span class="string">'J4'</span>] = df.apply(func,axis=<span class="number">1</span>) <span class="comment"># axis=1 row-wise</span></div><div class="line">df</div></pre></td></tr></table></figure>
<p><img src="p-basic-76.png" alt=""></p>
<h6 id="apply-with-two-arguments"><a href="#apply-with-two-arguments" class="headerlink" title="apply with two arguments"></a>apply with two arguments</h6><p>Reference <a href="https://stackoverflow.com/questions/34279378/python-pandas-apply-function-with-two-arguments-to-columns" target="_blank" rel="external">stackoverflow</a><br>Reference <a href="https://stackoverflow.com/questions/39814416/pandas-apply-with-args-which-are-dataframe-row-entries" target="_blank" rel="external">stackoverflow</a><br>Reference <a href="https://stackoverflow.com/questions/12182744/python-pandas-apply-a-function-with-arguments-to-a-series" target="_blank" rel="external">stackflow</a></p>
<h6 id="Case-optimization-with-apply"><a href="#Case-optimization-with-apply" class="headerlink" title="Case: optimization with apply()"></a>Case: optimization with apply()</h6><p>To find out the value of multiplier for DataFrame df2 such that the difference between the column d of DataFrame df1 and df2 approaches to zero,<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">df1 = DataFrame(np.repeat([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="number">3</span>).reshape((<span class="number">3</span>,<span class="number">3</span>)),columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])</div><div class="line">df2 = DataFrame(np.repeat([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>],<span class="number">3</span>).reshape((<span class="number">3</span>,<span class="number">3</span>)),columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])</div><div class="line">df1</div><div class="line">df2</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-87.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># continued</span></div><div class="line"><span class="comment"># the augmentation function applied on every column</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">mulfunc</span><span class="params">(x,factor)</span>:</span></div><div class="line">    a = x[<span class="string">'a'</span>]*factor</div><div class="line">    b = x[<span class="string">'b'</span>]*factor</div><div class="line">    c = x[<span class="string">'c'</span>]*factor</div><div class="line">    <span class="keyword">return</span> a+b+c</div><div class="line"><span class="comment"># the objective function used for finding the optimal multiplier that leads to the least different between df1['d'] and df2['d']</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">objfunc</span><span class="params">(x)</span>:</span></div><div class="line">    df1[<span class="string">'d'</span>] = df1.apply(mulfunc,factor=<span class="number">2.</span>,axis=<span class="number">1</span>)</div><div class="line">    df2[<span class="string">'d'</span>] = df2.apply(mulfunc,factor=x,axis=<span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> df1[<span class="string">'d'</span>].subtract(df2[<span class="string">'d'</span>]).sum()</div><div class="line"></div><div class="line"><span class="keyword">import</span> scipy.optimize</div><div class="line"><span class="keyword">import</span> scipy</div><div class="line"><span class="keyword">print</span> scipy.optimize.brentq(objfunc, <span class="number">0.</span>,<span class="number">100.</span>) <span class="comment"># Answer: 0.2</span></div></pre></td></tr></table></figure>
<h6 id="applymap-attribute-of-DataFrame"><a href="#applymap-attribute-of-DataFrame" class="headerlink" title="applymap : attribute of DataFrame"></a>applymap : attribute of DataFrame</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># "Element-wise" Python functions can be used, too. Suppose you wanted to compute a formatted string from each floating point value in frame. You can do this with `applymap`:</span></div><div class="line">format = <span class="keyword">lambda</span> x: <span class="string">'%.2f'</span> % x</div><div class="line">frame.applymap(format)</div><div class="line"><span class="comment"># The reason for the name applymap is that Series has a map method for applying an element-wise function:</span></div><div class="line">frame[<span class="string">'e'</span>].map(format)</div></pre></td></tr></table></figure>
<p><img src="p-basic-33.png" alt=""></p>
<h5 id="Getting-the-common-rows-of-two-columns"><a href="#Getting-the-common-rows-of-two-columns" class="headerlink" title="Getting the common rows of two columns"></a>Getting the common rows of two columns</h5><p>Reference <a href="https://stackoverflow.com/questions/30291032/comparing-2-columns-of-two-python-pandas-dataframes-and-getting-the-common-rows" target="_blank" rel="external">stackoverflow</a></p>
<h5 id="Sorting-1"><a href="#Sorting-1" class="headerlink" title="Sorting"></a>Sorting</h5><p>Sorting a data set by some criterion is another important built-in operation. To sort lexicographically by row or column index, use the sort_index method, which returns a new, sorted object.</p>
<h6 id="sort-index"><a href="#sort-index" class="headerlink" title="sort_index"></a>sort_index</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># On Series</span></div><div class="line">obj = Series(range(<span class="number">4</span>), index=[<span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</div><div class="line">obj.sort_index()</div><div class="line"><span class="comment"># on DataFrame</span></div><div class="line">frame = DataFrame(np.arange(<span class="number">8</span>).reshape((<span class="number">2</span>, <span class="number">4</span>)), index=[<span class="string">'three'</span>, <span class="string">'one'</span>], columns=[<span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</div><div class="line">frame.sort_index()</div><div class="line">frame.sort_index(axis=<span class="number">1</span>)</div><div class="line">frame.sort_index(axis=<span class="number">1</span>, ascending=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<h6 id="sort-values"><a href="#sort-values" class="headerlink" title="sort_values"></a>sort_values</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># == On Series == #</span></div><div class="line"><span class="comment"># to sort a series its values, use its order method,</span></div><div class="line">obj = Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-3</span>, <span class="number">2</span>])</div><div class="line">obj.sort_values()</div><div class="line">obj = Series([<span class="number">4</span>, np.nan, <span class="number">7</span>, np.nan, <span class="number">-3</span>, <span class="number">2</span>])</div><div class="line"><span class="comment"># any missing values are sorted to the end of the Series by default</span></div><div class="line">obj.sort_values()</div><div class="line"></div><div class="line"><span class="comment"># == On DataFrame == #</span></div><div class="line"><span class="comment"># to sort by the values in one or more columns on DataFrame, pass one or more colums to the `by` option:</span></div><div class="line">frame = DataFrame(&#123;<span class="string">'b'</span>: [<span class="number">4</span>, <span class="number">7</span>, <span class="number">-3</span>, <span class="number">2</span>], <span class="string">'a'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]&#125;)</div><div class="line">frame</div><div class="line">frame.sort_values(by=<span class="string">'b'</span>)</div><div class="line">frame.sort_values(by=[<span class="string">'a'</span>, <span class="string">'b'</span>])</div></pre></td></tr></table></figure>
<p>Ranking is assigning ranks from one through the number of valid data points in an array. By default, <code>rank</code> breaks ties by assigning each group the mean rank.</p>
<h6 id="ranking"><a href="#ranking" class="headerlink" title="ranking"></a>ranking</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># == On Series == #</span></div><div class="line">obj = Series([<span class="number">7</span>, <span class="number">-5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">4</span>])</div><div class="line">obj.rank()</div><div class="line">obj.rank(method=<span class="string">'first'</span>)</div><div class="line"><span class="comment"># you can rank in descending order</span></div><div class="line">obj.rank(ascending=<span class="keyword">False</span>, method=<span class="string">'max'</span>)</div><div class="line"></div><div class="line"><span class="comment"># == On DataFrame == #</span></div><div class="line"><span class="comment"># DataFrame can compute ranks over the rows or the columns:</span></div><div class="line">frame = DataFrame(&#123;<span class="string">'b'</span>: [<span class="number">4.3</span>, <span class="number">7</span>, <span class="number">-3</span>, <span class="number">2</span>], <span class="string">'a'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>], <span class="string">'c'</span>: [<span class="number">-2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">-2.5</span>]&#125;)</div><div class="line">frame</div><div class="line">frame.rank(axis=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h6 id="reindexing-after-sorting"><a href="#reindexing-after-sorting" class="headerlink" title="reindexing after sorting"></a>reindexing after sorting</h6><p>Use <code>reset_index</code> to get the index back to a default index of 0, 1, …, n (and use <code>drop=True</code> to indicate you want to drop the existing index instead of adding it as a column to your dataframe).<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">x = np.tile(np.arange(<span class="number">3</span>),<span class="number">3</span>)</div><div class="line">y = np.repeat(np.arange(<span class="number">3</span>),<span class="number">3</span>)</div><div class="line">df = pd.DataFrame(&#123;<span class="string">"x"</span>: x, <span class="string">"y"</span>: y&#125;)</div><div class="line"><span class="comment"># sort</span></div><div class="line">df2 = df.sort_values([<span class="string">"x"</span>, <span class="string">"y"</span>])</div><div class="line">df2</div><div class="line"><span class="comment"># reset index</span></div><div class="line"><span class="comment"># method 1</span></div><div class="line">df2.set_index(np.arange(len(df2.index)))</div><div class="line"><span class="comment"># method 2 (better)</span></div><div class="line">df2.reset_index(drop=<span class="keyword">True</span>)</div></pre></td></tr></table></figure></p>
<h5 id="Duplicate-indexes"><a href="#Duplicate-indexes" class="headerlink" title="Duplicate indexes"></a>Duplicate indexes</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Axis indexes with duplicate values</span></div><div class="line">obj = Series(range(<span class="number">5</span>), index=[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</div><div class="line">obj</div><div class="line"><span class="comment"># the index's is_unique property can tell you whether its values are unique:</span></div><div class="line">obj.index.is_unique</div><div class="line">obj[<span class="string">'a'</span>]</div><div class="line">obj[<span class="string">'c'</span>]</div><div class="line">df = DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">3</span>), index=[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>])</div><div class="line">df</div><div class="line">df.loc[<span class="string">'b'</span>]</div></pre></td></tr></table></figure>
<h5 id="Functions-1"><a href="#Functions-1" class="headerlink" title="Functions"></a>Functions</h5><h6 id="describe-amp-dtypes"><a href="#describe-amp-dtypes" class="headerlink" title="describe() &amp; dtypes"></a>describe() &amp; dtypes</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Summarizing and computing descriptive statistics</span></div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line">df = DataFrame([[<span class="number">1.4</span>, np.nan, <span class="string">"c"</span>], [<span class="number">7.1</span>, <span class="number">-4.5</span>, <span class="number">2</span>], [np.nan, np.nan,<span class="number">3</span> ], [<span class="number">0.75</span>, <span class="number">-1.3</span>, <span class="string">"d"</span>]], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>], columns=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>])</div><div class="line">df</div><div class="line">df.dtypes</div><div class="line"></div><div class="line"><span class="comment"># NA values are excluded unless the entire slice (row or column in this case) is NA. This can be disabled using the skipna option.</span></div><div class="line">df.sum()</div><div class="line">df.sum(axis=<span class="number">1</span>) <span class="comment"># axis represents the axis to reduce over.</span></div><div class="line">df.mean(axis=<span class="number">1</span>, skipna=<span class="keyword">False</span>)</div><div class="line">df.describe()</div><div class="line">df.describe(percentiles=np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.1</span>))</div></pre></td></tr></table></figure>
<h6 id="locate-maximum"><a href="#locate-maximum" class="headerlink" title="locate maximum"></a>locate maximum</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># continued</span></div><div class="line"><span class="comment"># return indirect statistics like the index value where the max or min values are attained:</span></div><div class="line">df[<span class="string">'one'</span>].idxmax() <span class="comment"># 'b'</span></div><div class="line">df[<span class="string">'two'</span>].cumsum()</div><div class="line">df.describe()</div><div class="line">obj = Series([<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>] *<span class="number">2</span>)</div><div class="line">obj</div><div class="line">obj.describe()</div></pre></td></tr></table></figure>
<p><img src="p-basic-103.png" alt=""></p>
<h6 id="shift"><a href="#shift" class="headerlink" title="shift"></a>shift</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">df</div><div class="line"><span class="comment"># continued</span></div><div class="line">df.one = df.three.shift(<span class="number">1</span>)</div><div class="line">df</div></pre></td></tr></table></figure>
<p><img src="p-basic-104.png" alt=""></p>
<h5 id="Case-study-stock-markets"><a href="#Case-study-stock-markets" class="headerlink" title="Case study: stock markets"></a>Case study: stock markets</h5><h6 id="Yahoo-finance"><a href="#Yahoo-finance" class="headerlink" title="Yahoo finance"></a>Yahoo finance</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame</div><div class="line"><span class="comment"># Correlation and covariance</span></div><div class="line"><span class="keyword">import</span> pandas_datareader.data <span class="keyword">as</span> web</div><div class="line">all_data = &#123;&#125;</div><div class="line"><span class="keyword">for</span> ticker <span class="keyword">in</span> [<span class="string">'AAPL'</span>, <span class="string">'IBM'</span>, <span class="string">'MSFT'</span>, <span class="string">'GOOG'</span>]:</div><div class="line">  all_data[ticker] = web.get_data_yahoo(ticker)</div><div class="line">print(all_data)</div><div class="line">price = DataFrame(&#123;tic: data[<span class="string">'Adj Close'</span>] <span class="keyword">for</span> tic, data <span class="keyword">in</span> all_data.items()&#125;)</div><div class="line">volume = DataFrame(&#123;tic: data[<span class="string">'Volume'</span>] <span class="keyword">for</span> tic, data <span class="keyword">in</span> all_data.items()&#125;)</div><div class="line">returns = price.pct_change()</div><div class="line">returns.tail()</div><div class="line"><span class="comment"># correlation of the overlapping, non-NA, aligned-by-index calues in two Series</span></div><div class="line">returns.MSFT.corr(returns.IBM)</div><div class="line">returns.MSFT.cov(returns.IBM)</div><div class="line">returns.corr()</div><div class="line">returns.cov()</div><div class="line"><span class="comment"># compute pairwise correlation between a DataFrame's columns or rows with anther Series or DataFrame</span></div><div class="line">returns.corrwith(returns.IBM)</div><div class="line">returns.corrwith(volume)</div></pre></td></tr></table></figure>
<h6 id="Google-finance"><a href="#Google-finance" class="headerlink" title="Google finance"></a>Google finance</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> googlefinance.client <span class="keyword">import</span> get_price_data, get_closing_data, get_open_close_data, get_prices_data</div><div class="line"><span class="comment"># Method 1</span></div><div class="line"><span class="comment"># Dow Jones</span></div><div class="line">param = &#123;</div><div class="line">    <span class="string">'q'</span>: <span class="string">".DJI"</span>, <span class="comment"># Stock symbol (ex: "AAPL")</span></div><div class="line">    <span class="string">'i'</span>: <span class="string">"86400"</span>, <span class="comment"># Interval size in seconds ("86400" = 1 day intervals)</span></div><div class="line">    <span class="string">'x'</span>: <span class="string">"INDEXDJX"</span>, <span class="comment"># Stock exchange symbol on which stock is traded (ex: "NASD")</span></div><div class="line">    <span class="string">'p'</span>: <span class="string">"1Y"</span> <span class="comment"># Period (Ex: "1Y" = 1 year)</span></div><div class="line">    &#125;</div><div class="line"><span class="comment"># get price data (return pandas dataframe)</span></div><div class="line">df = get_price_data(param)</div><div class="line">print(df)</div><div class="line"></div><div class="line"><span class="comment"># Method 2</span></div><div class="line">params = [</div><div class="line">    <span class="comment"># Dow Jones</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">".DJI"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXDJX"</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="comment"># NYSE COMPOSITE (DJ)</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">"NYA"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXNYSEGIS"</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="comment"># S&amp;P 500</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">".INX"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXSP"</span>,</div><div class="line">    &#125;</div><div class="line">]</div><div class="line">period = <span class="string">"1Y"</span></div><div class="line"><span class="comment"># get closing price data (return pandas dataframe)</span></div><div class="line">df = get_closing_data(params, period)</div><div class="line">print(df)</div><div class="line"></div><div class="line"><span class="comment"># Method 3</span></div><div class="line">params = [</div><div class="line">    <span class="comment"># Dow Jones</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">".DJI"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXDJX"</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="comment"># NYSE COMPOSITE (DJ)</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">"NYA"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXNYSEGIS"</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="comment"># S&amp;P 500</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">".INX"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXSP"</span>,</div><div class="line">    &#125;</div><div class="line">]</div><div class="line">period = <span class="string">"1Y"</span></div><div class="line"><span class="comment"># get open and close price data (return pandas dataframe)</span></div><div class="line">df = get_open_close_data(params, period)</div><div class="line">print(df)</div><div class="line"></div><div class="line"><span class="comment"># Method 4</span></div><div class="line">params = [</div><div class="line">    <span class="comment"># Dow Jones</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">".DJI"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXDJX"</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="comment"># NYSE COMPOSITE (DJ)</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">"NYA"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXNYSEGIS"</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="comment"># S&amp;P 500</span></div><div class="line">    &#123;</div><div class="line">        <span class="string">'q'</span>: <span class="string">".INX"</span>,</div><div class="line">        <span class="string">'x'</span>: <span class="string">"INDEXSP"</span>,</div><div class="line">    &#125;</div><div class="line">]</div><div class="line">period = <span class="string">"1Y"</span></div><div class="line"><span class="comment"># get open, high, low, close price data (return pandas dataframe)</span></div><div class="line">df = get_prices_data(params, period)</div><div class="line">print(df)</div></pre></td></tr></table></figure>
<h5 id="Subsetting"><a href="#Subsetting" class="headerlink" title="Subsetting"></a>Subsetting</h5><h6 id="Case-study-histogram"><a href="#Case-study-histogram" class="headerlink" title="Case study: histogram"></a>Case study: histogram</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># method 1</span></div><div class="line"><span class="comment"># Unique values, value counts, and membership</span></div><div class="line">obj = Series([<span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'c'</span>])</div><div class="line">uniques = obj.unique() <span class="comment"># gives an array of the unique values in a Series</span></div><div class="line">uniques</div><div class="line">uniques.sort()</div><div class="line">uniques</div><div class="line">obj.value_counts()</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># The Series is sorted by value in descending order as a convenience. value_counts is also available as a top-level pandas method that can be used with any array or sequence.</span></div><div class="line"><span class="comment"># method 2</span></div><div class="line">pd.value_counts(obj.values, sort=<span class="keyword">False</span>)</div><div class="line">mask = obj.isin([<span class="string">'b'</span>, <span class="string">'c'</span>])</div><div class="line">mask</div><div class="line">obj</div><div class="line">obj[mask] <span class="comment"># select out those data with rows of interest</span></div></pre></td></tr></table></figure>
<h6 id="Case-study-histogram-1"><a href="#Case-study-histogram-1" class="headerlink" title="Case study: histogram"></a>Case study: histogram</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">data = DataFrame(&#123;<span class="string">'Qu1'</span>: [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="string">'Qu2'</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">'Qu3'</span>: [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>]&#125;)</div><div class="line">data</div><div class="line">data.apply(pd.value_counts) <span class="comment"># trick. apply value_counts for each column. For Qu1, we have a single 1, no 2's, two 3's and so on.</span></div><div class="line">result = data.apply(pd.value_counts).fillna(<span class="number">0</span>) <span class="comment"># supplant np.nan with zero</span></div><div class="line">result</div></pre></td></tr></table></figure>
<h5 id="Extracting-digits-from-string"><a href="#Extracting-digits-from-string" class="headerlink" title="Extracting digits from string"></a>Extracting digits from string</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># unfinished</span></div><div class="line">df[<span class="string">'Month'</span>]=df[<span class="string">'Period'</span>].str.extract(<span class="string">'(\d+)'</span>).astype(int)</div></pre></td></tr></table></figure>
<h5 id="Missing-data"><a href="#Missing-data" class="headerlink" title="Missing data"></a>Missing data</h5><p>Pandas uses the floating point value NaN (Not a Number) to represent missing data in both floating as well as in non-floating point arrays. It is just used as a sentinel that can be easily detected.</p>
<h6 id="Detecting-NaN"><a href="#Detecting-NaN" class="headerlink" title="Detecting NaN"></a>Detecting NaN</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> nan <span class="keyword">as</span> NA</div><div class="line"><span class="comment"># Handling missing data</span></div><div class="line">string_data = Series([<span class="string">'aardvark'</span>, <span class="string">'artichoke'</span>, np.nan, <span class="string">'avocado'</span>])</div><div class="line">string_data</div><div class="line">string_data.isnull()</div><div class="line"><span class="comment"># The built-in Python None value is also treated as NA in object arrays:</span></div><div class="line">string_data[<span class="number">0</span>] = <span class="keyword">None</span></div><div class="line">string_data.isnull()</div><div class="line">string_data <span class="keyword">is</span> <span class="keyword">None</span> <span class="comment"># False</span></div></pre></td></tr></table></figure>
<p><img src="p-basic-45.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">frame = DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">3</span>), index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>], columns=list(<span class="string">'bde'</span>))</div><div class="line">frame.loc[:<span class="number">2</span>,<span class="string">'e'</span>]=np.nan</div><div class="line">frame</div><div class="line"><span class="comment"># this doesn't work</span></div><div class="line">frame.loc[frame[<span class="string">'e'</span>]==np.nan,<span class="string">'d'</span>] = <span class="number">2</span></div><div class="line">frame</div><div class="line"><span class="comment"># this works</span></div><div class="line">frame.loc[frame[<span class="string">'e'</span>].isnull(),<span class="string">'d'</span>] = <span class="number">2</span></div><div class="line">frame</div></pre></td></tr></table></figure>
<p><img src="p-basic-69.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># continued</span></div><div class="line"><span class="comment"># another application</span></div><div class="line">frame.loc[frame[<span class="string">'e'</span>].notnull(),<span class="string">'e'</span>] = <span class="number">-1.</span></div><div class="line">frame</div></pre></td></tr></table></figure>
<p><img src="p-basic-98.png" alt=""></p>
<h6 id="Fill-missing-values"><a href="#Fill-missing-values" class="headerlink" title="Fill missing values"></a>Fill missing values</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Filtering out missing data</span></div><div class="line">data = Series([<span class="number">1</span>, NA, <span class="number">3.5</span>, NA, <span class="number">7</span>])</div><div class="line"><span class="comment"># method 1</span></div><div class="line">data.dropna()</div><div class="line"><span class="comment"># method 2</span></div><div class="line">data[data.notnull()]</div></pre></td></tr></table></figure>
<h6 id="Drop-NaN-by-counting"><a href="#Drop-NaN-by-counting" class="headerlink" title="Drop NaN by counting"></a>Drop NaN by counting</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#  You may want to drop rows or columns which are all NA or just those containing any NAs. dropna by default drops any row containing a missing value:</span></div><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> nan <span class="keyword">as</span> NA</div><div class="line">data = DataFrame([[<span class="number">1.</span>, <span class="number">6.5</span>, <span class="number">3.</span>], [<span class="number">1.</span>, NA, NA], [NA, NA, NA], [NA, <span class="number">6.5</span>, <span class="number">3.</span>]])</div><div class="line">data</div><div class="line"><span class="comment"># clean type 1</span></div><div class="line">cleaned = data.dropna()</div><div class="line">cleaned</div></pre></td></tr></table></figure>
<p><img src="p-basic-43.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># (continued)</span></div><div class="line"><span class="comment"># clean type 2</span></div><div class="line"><span class="comment"># Passing how='all' will only drop rows that are all NA:</span></div><div class="line">data.dropna(how=<span class="string">'all'</span>)</div><div class="line">data[<span class="number">4</span>] = NA <span class="comment"># to add a new column with NA</span></div><div class="line">data</div><div class="line"><span class="comment"># Dropping columns in the same way is only a matter of passing axis=1:</span></div><div class="line">data.dropna(axis=<span class="number">1</span>, how=<span class="string">'all'</span>)</div></pre></td></tr></table></figure>
<p><img src="p-basic-44.png" alt=""></p>
<h6 id="Drop-NaN-by-layers"><a href="#Drop-NaN-by-layers" class="headerlink" title="Drop NaN by layers"></a>Drop NaN by layers</h6><p>Suppose you want to keep only rows containing a certain number of observations. You can indicate this with the thresh argument:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> nan <span class="keyword">as</span> NA</div><div class="line">df = DataFrame(np.random.randn(<span class="number">7</span>, <span class="number">3</span>))</div><div class="line">df</div><div class="line">df.iloc[:<span class="number">4</span>, <span class="number">1</span>] = NA</div><div class="line">df.iloc[:<span class="number">2</span>, <span class="number">2</span>] = NA</div><div class="line">df</div><div class="line">df.dropna(thresh=<span class="number">3</span>) <span class="comment"># contains at least 3 valid values in a row</span></div><div class="line"><span class="comment"># Filling in missing data</span></div><div class="line">df.fillna(<span class="number">0</span>)</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-41.png" alt=""><br><img src="p-basic-42.png" alt=""></p>
<h6 id="Replace-NaN"><a href="#Replace-NaN" class="headerlink" title="Replace NaN"></a>Replace NaN</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Calling fillna with a dict you can use a different fill value for each column:</span></div><div class="line">df.fillna(&#123;<span class="number">1</span>: <span class="number">0.5</span>, <span class="number">3</span>: <span class="number">-1</span>&#125;)</div><div class="line"><span class="comment"># fillna returns a new object, but you can modify the existing object in place:</span></div><div class="line"><span class="comment"># fillna always returns a reference to the filled object</span></div><div class="line">_ = df.fillna(<span class="number">0</span>, inplace=<span class="keyword">True</span>)</div><div class="line">df</div></pre></td></tr></table></figure>
<h6 id="Replacing-NaN-with-counterparts"><a href="#Replacing-NaN-with-counterparts" class="headerlink" title="Replacing NaN with counterparts"></a>Replacing NaN with counterparts</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">a = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</div><div class="line">data = DataFrame(a,columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</div><div class="line">data.loc[data[<span class="string">'a'</span>]&gt;=<span class="number">4</span>,<span class="string">'b'</span>] = np.nan</div><div class="line">data</div><div class="line"><span class="comment"># update column b with column a</span></div><div class="line">data[<span class="string">'new_b'</span>] = data.b.fillna(data.a)</div><div class="line">data</div></pre></td></tr></table></figure>
<p><img src="p-basic-79.png" alt=""></p>
<h6 id="Fill-in-limited-scope"><a href="#Fill-in-limited-scope" class="headerlink" title="Fill in limited scope"></a>Fill in limited scope</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">df = DataFrame(np.random.randn(<span class="number">6</span>, <span class="number">3</span>))</div><div class="line">df.iloc[<span class="number">2</span>:, <span class="number">1</span>] = NA</div><div class="line">df.iloc[<span class="number">4</span>:, <span class="number">2</span>] = NA</div><div class="line">df</div><div class="line">df.fillna(method=<span class="string">'ffill'</span>)</div><div class="line">df.fillna(method=<span class="string">'ffill'</span>, limit=<span class="number">2</span>)</div></pre></td></tr></table></figure>
<h6 id="Fill-with-mean"><a href="#Fill-with-mean" class="headerlink" title="Fill with mean()"></a>Fill with mean()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># With fillna you can do lots of other things with a little creativity. For example, you might pass the mean or median value of a Series:</span></div><div class="line">data = Series([<span class="number">1.</span>, NA, <span class="number">3.5</span>, NA, <span class="number">7</span>])</div><div class="line">data.fillna(data.mean())</div></pre></td></tr></table></figure>
<h6 id="Replace-with-other-values"><a href="#Replace-with-other-values" class="headerlink" title="Replace with other values"></a>Replace with other values</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># data</span></div><div class="line">df = DataFrame(np.random.randn(<span class="number">6</span>, <span class="number">3</span>), columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])</div><div class="line">df.loc[df[<span class="string">'a'</span>]&gt;<span class="number">0</span>,<span class="string">'b'</span>] = <span class="string">"string"</span> <span class="comment"># if an entry whose a is bigger than zero, we replace its b attribute with "string"</span></div><div class="line">df</div><div class="line"><span class="comment"># replacing</span></div><div class="line">mapping = &#123;<span class="string">'string'</span>: np.nan&#125; <span class="comment"># set up the replacing rule</span></div><div class="line">df.replace(&#123;<span class="string">'b'</span>:mapping&#125;) <span class="comment"># replace all the strings in b</span></div></pre></td></tr></table></figure>
<h6 id="Convert-to-numeric"><a href="#Convert-to-numeric" class="headerlink" title="Convert to numeric"></a>Convert to numeric</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">df = pd.DataFrame(&#123;<span class="string">"A"</span>:[<span class="string">"1.1"</span>,<span class="string">"1.2"</span>,<span class="string">"infinity"</span>,<span class="string">"1.4"</span>], <span class="string">"B"</span>:[<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>]&#125;)</div><div class="line">df</div><div class="line">df.dtypes</div><div class="line"><span class="comment"># key 1-1</span></div></pre></td></tr></table></figure>
<p><img src="p-basic-46.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">df[<span class="string">'A'</span>] = df[<span class="string">'A'</span>].apply(pd.to_numeric, errors=<span class="string">"coerce"</span>)</div><div class="line">df</div><div class="line">df.sort_values([<span class="string">'A'</span>],ascending=[<span class="keyword">True</span>])</div><div class="line"><span class="comment"># key 1-2</span></div><div class="line">df = df[pd.notnull(df[<span class="string">'A'</span>])]</div><div class="line">df</div></pre></td></tr></table></figure>
<p><img src="p-basic-47.png" alt=""></p>
<h5 id="Hierarchical-indexing"><a href="#Hierarchical-indexing" class="headerlink" title="Hierarchical indexing"></a>Hierarchical indexing</h5><h6 id="stack-amp-unstack"><a href="#stack-amp-unstack" class="headerlink" title="stack() &amp; unstack()"></a>stack() &amp; unstack()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Hierarchical indexing</span></div><div class="line">data = Series(np.random.randn(<span class="number">10</span>), index=[[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'d'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]])</div><div class="line">data</div><div class="line">data.index</div><div class="line"><span class="comment"># With a hierarchically-indexed object, so-called partial indexing is possible, enabling you to concisely select subsets of the data:</span></div><div class="line">data[<span class="string">'b'</span>]</div><div class="line"><span class="comment"># method 1:</span></div><div class="line">data[<span class="string">'b'</span>:<span class="string">'c'</span>]</div><div class="line"><span class="comment"># method 2:</span></div><div class="line">data.ix[[<span class="string">'b'</span>, <span class="string">'d'</span>]]</div><div class="line"><span class="comment"># Selection is even possible in some cases from an “inner” level:</span></div><div class="line">data[:, <span class="number">2</span>]</div><div class="line">data.unstack()</div><div class="line">data.unstack().stack()</div></pre></td></tr></table></figure>
<h6 id="MultiIndex"><a href="#MultiIndex" class="headerlink" title="MultiIndex"></a>MultiIndex</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">frame = DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)), index=[[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]], columns=[[<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>], [<span class="string">'Green'</span>, <span class="string">'Red'</span>, <span class="string">'Green'</span>]])</div><div class="line">frame</div><div class="line">frame.index.names = [<span class="string">'key1'</span>, <span class="string">'key2'</span>]</div><div class="line">frame.columns.names = [<span class="string">'state'</span>, <span class="string">'color'</span>]</div><div class="line">frame</div><div class="line">frame[<span class="string">'Ohio'</span>]</div><div class="line">MultiIndex.from_arrays([[<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>], [<span class="string">'Green'</span>, <span class="string">'Red'</span>, <span class="string">'Green'</span>]], names=[<span class="string">'state'</span>, <span class="string">'color'</span>])</div></pre></td></tr></table></figure>
<h6 id="levels-reordering"><a href="#levels-reordering" class="headerlink" title="levels reordering"></a>levels reordering</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Reordering and sorting levels</span></div><div class="line"><span class="comment">#  The swaplevel takes two level numbers or names and returns a new object with the levels interchanged (but the data is otherwise unaltered):</span></div><div class="line">frame.swaplevel(<span class="string">'key1'</span>, <span class="string">'key2'</span>)</div><div class="line">frame.sortlevel(<span class="number">1</span>)</div><div class="line">frame.swaplevel(<span class="number">0</span>, <span class="number">1</span>).sortlevel(<span class="number">0</span>) <span class="comment"># the same result as the command above</span></div><div class="line"></div><div class="line"><span class="comment"># Summary statistics by level</span></div><div class="line">frame.sum(level=<span class="string">'key2'</span>)</div><div class="line">frame.sum(level=<span class="string">'color'</span>, axis=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h5 id="Case-study-panel-data"><a href="#Case-study-panel-data" class="headerlink" title="Case study: panel data"></a>Case study: panel data</h5><p>To create a Panel, you can use a dict of DataFrame objects or a three-dimensional ndarray:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Panel data</span></div><div class="line"><span class="keyword">import</span> pandas_datareader <span class="keyword">as</span> web</div><div class="line">pdata = pd.Panel(dict((stk, web.get_data_yahoo(stk)) <span class="keyword">for</span> stk <span class="keyword">in</span> [<span class="string">'AAPL'</span>, <span class="string">'GOOG'</span>, <span class="string">'MSFT'</span>, <span class="string">'DELL'</span>]))</div><div class="line">pdata</div><div class="line">pdata = pdata.swapaxes(<span class="string">'items'</span>, <span class="string">'minor'</span>)</div><div class="line">pdata[<span class="string">'Adj Close'</span>]</div><div class="line"><span class="comment"># ix-based label indexing generalizes to three dimensions, so we can select all data at a particular date or a range of dates like so</span></div><div class="line">pdata.ix[:, <span class="string">'6/1/2012'</span>, :]</div><div class="line">pdata.ix[<span class="string">'Adj Close'</span>, <span class="string">'5/22/2012'</span>:, :]</div><div class="line"><span class="comment"># An alternate way to represent panel data, especially for fitting statistical models, is in “stacked” DataFrame form:</span></div><div class="line">stacked = pdata.ix[:, <span class="string">'5/30/2012'</span>:, :].to_frame()</div><div class="line">stacked</div><div class="line"><span class="comment"># DataFrame has a related to_panel method, the inverse of to_frame:</span></div><div class="line">stacked.to_panel()</div></pre></td></tr></table></figure></p>
<h5 id="Counting-sort-values"><a href="#Counting-sort-values" class="headerlink" title="Counting sort_values"></a>Counting sort_values</h5><ul>
<li>sampling with replacement: random.choices([1,2,3],k=6)</li>
<li>sampling without replacement: random.sample(range(1,4),3)<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">df = DataFrame(np.array(choices([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],k=<span class="number">20</span>)).reshape([<span class="number">10</span>,<span class="number">2</span>]),columns=[<span class="string">'a'</span>,<span class="string">'b'</span>])</div><div class="line">df</div><div class="line">df[<span class="string">'b'</span>].value_counts()</div><div class="line">df[<span class="string">'b'</span>].value_counts().index.tolist() <span class="comment"># [5, 2, 3, 4]</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="p-basic-101.png" alt=""></p>
<h3 id="Plot"><a href="#Plot" class="headerlink" title="Plot"></a>Plot</h3><p><strong>Multiple subplots</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line"><span class="comment"># First #</span></div><div class="line"></div><div class="line">x = np.random.rand(<span class="number">10</span>)</div><div class="line">y = np.random.rand(<span class="number">10</span>)</div><div class="line"></div><div class="line">figure1 = plt.plot(x,y)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-65.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Second #</span></div><div class="line"></div><div class="line">x1 = np.random.rand(<span class="number">10</span>)</div><div class="line">x2 = np.random.rand(<span class="number">10</span>)</div><div class="line">x3 = np.random.rand(<span class="number">10</span>)</div><div class="line">x4 = np.random.rand(<span class="number">10</span>)</div><div class="line">y1 = np.random.rand(<span class="number">10</span>)</div><div class="line">y2 = np.random.rand(<span class="number">10</span>)</div><div class="line">y3 = np.random.rand(<span class="number">10</span>)</div><div class="line">y4 = np.random.rand(<span class="number">10</span>)</div><div class="line"></div><div class="line">figure2, ((ax1, ax2), (ax3, ax4)) = plt.subplots(<span class="number">2</span>, <span class="number">2</span>)</div><div class="line">ax1.plot(x1,y1)</div><div class="line">ax2.plot(x2,y2)</div><div class="line">ax3.plot(x3,y3)</div><div class="line">ax4.plot(x4,y4)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="p-basic-73.png" alt=""></p>
<p><strong>Change tick frequency and starting point of axis range</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib</div><div class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> matplotlib.ticker <span class="keyword">as</span> ticker</div><div class="line"><span class="keyword">from</span> matplotlib.ticker <span class="keyword">import</span> AutoMinorLocator <span class="comment"># automatically set minor ticks based on the major ticks.</span></div><div class="line"></div><div class="line"><span class="comment"># data</span></div><div class="line">x = [<span class="number">0</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">15</span>]</div><div class="line">y = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">n= [<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>,<span class="string">'E'</span>]</div><div class="line">z = np.linspace(<span class="number">0</span>, <span class="number">20</span>, <span class="number">1000</span>)</div><div class="line">y1 = np.sin(z)<span class="number">-1.5</span></div><div class="line">y2 = np.cos(z)<span class="number">-1.5</span></div><div class="line"></div><div class="line"><span class="comment"># plot zone starts here</span></div><div class="line">fig, ax = plt.subplots()</div><div class="line"></div><div class="line"><span class="comment"># move subplots' bottom upward (or downward) and adjust the space between subplots_adjust</span></div><div class="line"><span class="comment"># fig.subplots_adjust(bottom=0.07, hspace=0.3)</span></div><div class="line"></div><div class="line">ax.scatter(x,y)</div><div class="line">line1, = ax.plot(z, y1, <span class="string">'--b'</span>, label=<span class="string">'sine'</span>)</div><div class="line">line2, = ax.plot(z, y2, <span class="string">'-r'</span>, label=<span class="string">'cosine'</span>)</div><div class="line">dashes = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">30</span>,<span class="number">5</span>] <span class="comment"># the lengths of each segment in the pattern. 1 denotes a point.</span></div><div class="line">line1.set_dashes(dashes)</div><div class="line"><span class="comment"># set up axis range before tick frequency</span></div><div class="line">cur_xlim = ax.get_xlim()</div><div class="line">ax.set_xlim([<span class="number">-2</span>,cur_xlim[<span class="number">1</span>]]) <span class="comment"># set the start and end points of x axis.</span></div><div class="line"></div><div class="line"><span class="comment"># set up tick frequency or Even customary position.</span></div><div class="line">start, end = ax.get_xlim()</div><div class="line">ax.xaxis.set_ticks(np.arange(start, end, <span class="number">4</span>))</div><div class="line">ax.xaxis.set_major_formatter(ticker.FormatStrFormatter(<span class="string">'%0.1fM'</span>)) <span class="comment"># with percent sign following integer, %i%%; integer with k to denote thousands, using '%ik' If want to add dollar sign, in this case, type '\$%ik' for something like '$10k' or '\$%2.1fM' for something like '$2.1M'.</span></div><div class="line"></div><div class="line"><span class="comment"># relabel</span></div><div class="line">xticklabels = ax.get_xticks().tolist()</div><div class="line">xticklabels[<span class="number">1</span>] = <span class="string">'dog'</span></div><div class="line">ax.set_xticklabels(xticklabels)</div><div class="line"></div><div class="line"><span class="comment"># reference: https://stackoverflow.com/questions/28810403/how-can-i-set-the-location-of-minor-ticks-in-matplotlib</span></div><div class="line"><span class="comment"># automatically set minor ticks based on the major ticks.</span></div><div class="line">minor_locator = AutoMinorLocator(<span class="number">2</span>)</div><div class="line">ax.yaxis.set_minor_locator(minor_locator)</div><div class="line">plt.grid(which=<span class="string">'minor'</span>)</div><div class="line"></div><div class="line"><span class="comment"># center line-broken axis label</span></div><div class="line"><span class="comment"># reference: https://stackoverflow.com/questions/10144962/centering-line-broken-axis-label-in-matplotlib</span></div><div class="line"><span class="comment"># ylabel('Soil Moisture Sensitivity,\n(0.01 K m$^3$ m$^&#123;-3&#125;$)', multialignment='center')</span></div><div class="line"></div><div class="line"><span class="comment"># advanced annotation</span></div><div class="line"><span class="comment"># reference: https://matplotlib.org/users/annotations_intro.html</span></div><div class="line"></div><div class="line"><span class="comment"># Task 2. change label and its decompositions</span></div><div class="line"><span class="comment"># Example:</span></div><div class="line"><span class="comment"># ax.xaxis.set_ticks([1,20,40,60,80,99])</span></div><div class="line"><span class="comment"># xticklabels = ax.get_xticks().tolist()</span></div><div class="line"><span class="comment"># xticklabels = ['99%','80%','60%','40%','20%','1%']</span></div><div class="line"><span class="comment"># ax.set_xticklabels(xticklabels)</span></div><div class="line"></div><div class="line"><span class="comment"># add horizontal line1</span></div><div class="line"><span class="comment"># ax.axhline(y=40,xmin=0,xmax=3,linestyle="--",c="black",linewidth=0.5,zorder=0) # it's OK to set xmin and xmax outside the figure's xaxis range.</span></div><div class="line"></div><div class="line"><span class="comment"># annotation</span></div><div class="line"><span class="keyword">for</span> i, txt <span class="keyword">in</span> enumerate(n):</div><div class="line">    ax.annotate(txt,(x[i]+<span class="number">0.1</span>,y[i]))</div><div class="line"></div><div class="line"><span class="comment"># legend</span></div><div class="line">handles, labels = ax.get_legend_handles_labels()</div><div class="line">ax.legend(handles[::<span class="number">-1</span>], labels[::<span class="number">-1</span>]) <span class="comment"># reverse the order</span></div><div class="line">ax.legend(loc=<span class="string">'upper left'</span>,bbox_to_anchor=[<span class="number">0</span>, <span class="number">1</span>],</div><div class="line">           ncol=<span class="number">2</span>, shadow=<span class="keyword">True</span>, title=<span class="string">"Legend"</span>, fancybox=<span class="keyword">True</span>)</div><div class="line">fig.suptitle(<span class="string">r'$\alpha$ upper title is over here'</span>,fontsize=<span class="number">10</span>)</div><div class="line">ax.set_title(<span class="string">'subtitle'</span>,fontsize=<span class="number">9</span>)</div><div class="line"></div><div class="line"><span class="comment"># tweak spacing to prevent clipping of set_ylabel</span></div><div class="line">plt.subplots_adjust(left=<span class="number">0.15</span>)</div><div class="line"></div><div class="line">ax.set_xlabel(<span class="string">'xlabel'</span>)</div><div class="line">ax.set_ylabel(<span class="string">'ylabel'</span>)</div><div class="line">ax.xaxis.label.set_size(<span class="number">12</span>)</div><div class="line">ax.yaxis.label.set_size(<span class="number">12</span>)</div><div class="line"></div><div class="line"><span class="comment"># ticks, grid and background color Subsetting</span></div><div class="line">major_ticks = np.arange(<span class="number">-2</span>, <span class="number">21</span>, <span class="number">4</span>)</div><div class="line">minor_ticks = np.arange(<span class="number">-2</span>, <span class="number">21</span>, <span class="number">2</span>)</div><div class="line">ax.set_xticks(major_ticks)</div><div class="line">ax.set_xticks(minor_ticks, minor=<span class="keyword">True</span>)</div><div class="line">ax.grid(which=<span class="string">'minor'</span>, alpha=<span class="number">0.2</span>)</div><div class="line">ax.grid(which=<span class="string">'major'</span>, alpha=<span class="number">0.5</span>)</div><div class="line">plt.rcParams[<span class="string">'axes.facecolor'</span>] = <span class="string">'white'</span></div><div class="line">plt.rcParams[<span class="string">'axes.edgecolor'</span>] = <span class="string">'black'</span></div><div class="line">plt.rcParams[<span class="string">'grid.alpha'</span>] = <span class="number">1</span></div><div class="line">plt.rcParams[<span class="string">'grid.color'</span>] = <span class="string">"#cccccc"</span></div><div class="line"></div><div class="line">plt.text(<span class="number">-2</span>,<span class="number">-4</span>,<span class="string">'text message over here!'</span>)</div><div class="line">plt.gcf().text(<span class="number">0.15</span>, <span class="number">-0.1</span>, <span class="string">'gcf text over here!'</span>)</div><div class="line"></div><div class="line">plt.grid(<span class="keyword">True</span>)</div><div class="line"></div><div class="line"><span class="comment"># save with transparent background and customary dpi</span></div><div class="line">plt.savefig(<span class="string">'test.png'</span>, dpi=<span class="number">150</span>, transparent=<span class="keyword">True</span>)</div><div class="line"><span class="comment"># save as svg</span></div><div class="line"><span class="comment"># plt.savefig("test.svg", format="svg")</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-67.png" alt=""></p>
<p><strong>Coloring objects with loop</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">x = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line">y = [ [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], [<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>] ]</div><div class="line">labels=[<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</div><div class="line">colors=[<span class="string">'r'</span>,<span class="string">'g'</span>,<span class="string">'b'</span>]</div><div class="line"></div><div class="line"><span class="comment"># loop over data, labels and colors</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(y)):</div><div class="line">    plt.plot(x,y[i],<span class="string">'o-'</span>,color=colors[i],label=labels[i])</div><div class="line"></div><div class="line">plt.legend()</div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-68.png" alt=""></p>
<p><img src="https://stackoverflow.com/questions/38981257/color-3d-surface-based-on-categories-that-passes-through-scatter-points" alt="Color 3D Surface Based on Categories that passes through scatter points"></p>
<h4 id="Clustered-stacked-bar-character"><a href="#Clustered-stacked-bar-character" class="headerlink" title="Clustered, stacked bar character"></a>Clustered, stacked bar character</h4><p><a href="https://stackoverflow.com/questions/22787209/how-to-have-clusters-of-stacked-bars-with-python-pandas#answer-35060572" target="_blank" rel="external">stackoverflow #1</a><br><a href="https://stackoverflow.com/questions/40121562/clustered-stacked-bar-in-python-pandas#answer-40121800" target="_blank" rel="external">stackoverflow #2</a></p>
<h4 id="Broken-axis-plots"><a href="#Broken-axis-plots" class="headerlink" title="Broken axis plots"></a>Broken axis plots</h4><p><a href="https://stackoverflow.com/questions/13027147/histogram-with-breaking-axis-and-interlaced-colorbar" target="_blank" rel="external">broken axis with two subplots</a><br><a href="https://stackoverflow.com/questions/44731152/matplotlib-create-broken-axis-in-subplot" target="_blank" rel="external">broken axis with an single subplot</a></p>
<h4 id="plt-subplots-vs-fig-subplots-adjust"><a href="#plt-subplots-vs-fig-subplots-adjust" class="headerlink" title="plt.subplots vs fig.subplots_adjust"></a>plt.subplots vs fig.subplots_adjust</h4><p><a href="https://stackoverflow.com/questions/31726643/how-do-i-get-multiple-subplots-in-matplotlib#answer-31727125" target="_blank" rel="external">stackoverflow</a></p>
<h4 id="XKCD-plot"><a href="#XKCD-plot" class="headerlink" title="XKCD plot"></a>XKCD plot</h4><p>Reference <a href="https://jakevdp.github.io/blog/2013/07/10/XKCD-plots-in-matplotlib/" target="_blank" rel="external">Pythonic Perambulations</a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">plt.xkcd()  <span class="comment"># Yes...</span></div><div class="line">plt.plot(sin(linspace(<span class="number">0</span>, <span class="number">10</span>)))</div><div class="line">plt.title(<span class="string">'Whoo Hoo!!!'</span>)</div></pre></td></tr></table></figure></p>
<p><img src="p-basic-102.png" alt=""></p>
<h4 id="Plot-“The-Economist”-type-graphs"><a href="#Plot-“The-Economist”-type-graphs" class="headerlink" title="Plot “The Economist”-type graphs"></a>Plot “The Economist”-type graphs</h4><p><a href="https://stackoverflow.com/questions/29859565/create-the-economist-style-graphs-from-python" target="_blank" rel="external">stackoverflow</a></p>
<h3 id="Optimization"><a href="#Optimization" class="headerlink" title="Optimization"></a>Optimization</h3><p>‘’’python<br>df1 = DataFrame(np.repeat([1,2,3],3).reshape((3,3)),columns=[‘a’,’b’,’c’])<br>df2 = DataFrame(np.repeat([10,20,30],3).reshape((3,3)),columns=[‘a’,’b’,’c’])<br>def mulfunc(x,factor):<br>    a = x[‘a’]<em>factor<br>    b = x[‘b’]</em>factor<br>    c = x[‘c’]*factor<br>    return a+b+c<br>def objfunc(x):<br>    df1[‘d’] = df1.apply(mulfunc,factor=2.,axis=1)<br>    df2[‘d’] = df2.apply(mulfunc,factor=x,axis=1)<br>    return df1[‘d’].subtract(df2[‘d’]).sum()</p>
<p>print scipy.optimize.brentq(objfunc, 0.,100.)<br>```</p>
<h2 id="Python-OOP"><a href="#Python-OOP" class="headerlink" title="Python OOP"></a>Python OOP</h2><p>OOP refers to Object-Oriented Programming.</p>
<h2 id="Applications-of-Python"><a href="#Applications-of-Python" class="headerlink" title="Applications of Python"></a>Applications of Python</h2><h3 id="Machine-learning"><a href="#Machine-learning" class="headerlink" title="Machine learning"></a>Machine learning</h3><ul>
<li>Scikit-learn module</li>
<li>TensorFlow module<h3 id="Data-mining"><a href="#Data-mining" class="headerlink" title="Data mining"></a>Data mining</h3></li>
<li>Scrapy module</li>
<li>Pattern module<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3>Reference: <a href="http://www.mysqltutorial.org/getting-started-mysql-python-connector/" target="_blank" rel="external">MySQLTutorial</a><h3 id="Tableau"><a href="#Tableau" class="headerlink" title="Tableau"></a>Tableau</h3>Reference: <a href="https://community.tableau.com/thread/236479" target="_blank" rel="external">Tableau Integration with Python</a></li>
</ul>
<h3 id="template"><a href="#template" class="headerlink" title="template"></a>template</h3><p>df = DataFrame({‘wealth’:[randint(0,1000) for x in range(0,size)], ‘weight’:np.array(prng.uniform(0,1,size)), ‘tax’:[randint(0,1000) for x in range(0,size)]})</p>
<h3 id="Regular-expressions"><a href="#Regular-expressions" class="headerlink" title="Regular expressions"></a>Regular expressions</h3><p><a href="https://developers.google.com/edu/python/regular-expressions" target="_blank" rel="external">Google developers</a></p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">Data munging or data wrangling is loosely the process of manually converting or mapping data from one “raw” form into another format that allows for more convenient consumption of the data with the help of semi-automated tools.</span><a href="#fnref:1" rev="footnote"> ↩</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline-block; vertical-align: top;">Set symmetric differences: elements that are in either of the arrays, but not both.</span><a href="#fnref:2" rev="footnote"> ↩</a></li></ol></div></div>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/note/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/note/2017/10/01/groupby/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Python Data Grouping
        
      </div>
    </a>
  
  
    <a href="/note/2017/09/08/english-sentence/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">English sentence</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python"><span class="nav-text">Python</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Library"><span class="nav-text">Library</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Standard-output"><span class="nav-text">Standard output</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Working-directory"><span class="nav-text">Working directory</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Change-current-directory"><span class="nav-text">Change current directory</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IDE-for-python"><span class="nav-text">IDE for python</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spyder"><span class="nav-text">Spyder</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Clear-all-variables-in-Spyder"><span class="nav-text">Clear all variables in Spyder</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Autocompletion-amp-search"><span class="nav-text">Autocompletion & search</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jupyter"><span class="nav-text">Jupyter</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Execute-code-from-the-clipboard"><span class="nav-text">Execute code from the clipboard</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dos-mode"><span class="nav-text">Dos mode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Timing-the-runtime"><span class="nav-text">Timing the runtime</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-data-structure"><span class="nav-text">Basic data structure</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lists"><span class="nav-text">Lists</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#List-of-floating-point-number"><span class="nav-text">List of floating point number</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Read-list"><span class="nav-text">Read    list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Membership-in-list"><span class="nav-text">Membership in list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Get-the-index-of-a-cell"><span class="nav-text">Get the index of a cell</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Get-the-index-of-matched-item-from-a-list"><span class="nav-text">Get the index of matched item from a list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Unpack-list"><span class="nav-text">Unpack list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Concatenation"><span class="nav-text">Concatenation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Combine-list-elements"><span class="nav-text">Combine list elements</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dictionary-of-Lists"><span class="nav-text">Dictionary of Lists</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Index-of-an-list-item"><span class="nav-text">Index of an list item</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Unzip-a-list"><span class="nav-text">Unzip a list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Split-into-equal-chunks"><span class="nav-text">Split into equal chunks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Clong-rows-and-columns"><span class="nav-text">Clong rows and columns</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Strings"><span class="nav-text">Strings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tuples"><span class="nav-text">Tuples</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dictionaries"><span class="nav-text">Dictionaries</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Basics"><span class="nav-text">Basics</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Task-word-counts-in-article"><span class="nav-text">Task: word counts in article</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Task-nested-dictionary"><span class="nav-text">Task: nested dictionary</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Return-multiple-dataframe-using-Dictionary"><span class="nav-text">Return multiple dataframe using Dictionary</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sets"><span class="nav-text">Sets</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Basics-1"><span class="nav-text">Basics</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Check-membership"><span class="nav-text">Check membership</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Functions"><span class="nav-text">Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#enumerate"><span class="nav-text">enumerate</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sorted"><span class="nav-text">sorted</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#zip"><span class="nav-text">zip</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#unzip"><span class="nav-text">unzip</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flow-control"><span class="nav-text">Flow control</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NumPy"><span class="nav-text">NumPy</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-ndarray"><span class="nav-text">Create ndarray</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#By-randomization"><span class="nav-text">By randomization</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Generate-random-integers-between-0-and-9"><span class="nav-text">Generate random integers between 0 and 9</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#By-functions"><span class="nav-text">By functions</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#array-amp-dtype"><span class="nav-text">array() & dtype</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#nan"><span class="nav-text">nan()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shape-amp-ndim"><span class="nav-text">shape() & ndim</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#zeros-amp-ones-amp-empty"><span class="nav-text">zeros() & ones() & empty()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#arange-amp-reshape"><span class="nav-text">arange() & reshape()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#view"><span class="nav-text">view()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Type-conversion"><span class="nav-text">Type conversion</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Numpy-matrix-vs-Numpy-array"><span class="nav-text">Numpy matrix vs Numpy array</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dtype"><span class="nav-text">dtype</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#astype"><span class="nav-text">astype()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#String-to-numeric-string"><span class="nav-text">String to numeric_string</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Factorization"><span class="nav-text">Factorization</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#basic"><span class="nav-text">basic</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#string-vector-creation-amp-frequency"><span class="nav-text">string vector creation & frequency</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Indexing"><span class="nav-text">Indexing</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#One-dimension-indexing"><span class="nav-text">One-dimension indexing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Numpy-indexing"><span class="nav-text">Numpy indexing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Numpy-conditional-indexing"><span class="nav-text">Numpy conditional indexing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Indexing-tricks"><span class="nav-text">Indexing tricks</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Re-ordering"><span class="nav-text">Re-ordering</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Select-a-square-region"><span class="nav-text">Select a square region</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Meshgrid-method"><span class="nav-text">Meshgrid method</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#With-equal-number-of-points"><span class="nav-text">With equal number of points</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#With-different-number-of-points-in-x-y-axis"><span class="nav-text">With different number of points in x, y axis</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Task-utility-surface"><span class="nav-text">Task: utility surface</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pairing-lists"><span class="nav-text">Pairing lists</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Boolean-toolkits"><span class="nav-text">Boolean toolkits</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Conditional-replacement"><span class="nav-text">Conditional replacement</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Counting-events"><span class="nav-text">Counting events</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sets-1"><span class="nav-text">Sets</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Basic-operations"><span class="nav-text">Basic operations</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Membership"><span class="nav-text">Membership</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Column-grouping-by-types"><span class="nav-text">Column grouping by types</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Numpy-functions"><span class="nav-text">Numpy functions</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Summary-statistics"><span class="nav-text">Summary statistics</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Cumulation"><span class="nav-text">Cumulation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Sorting"><span class="nav-text">Sorting</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Quantiles"><span class="nav-text">Quantiles</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#tile-amp-repeat"><span class="nav-text">tile & repeat</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Binary-universal-functions"><span class="nav-text">Binary universal functions</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Transpose-and-swap-axes"><span class="nav-text">Transpose and swap axes</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#inverse"><span class="nav-text">inverse</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#transpose-amp-dot"><span class="nav-text">.transpose() & .dot()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#File-input-and-output"><span class="nav-text">File input and output</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#np-save-np-load-np-savez"><span class="nav-text">np.save, np.load, np.savez</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#np-loadtxt"><span class="nav-text">np.loadtxt</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linear-algebra"><span class="nav-text">Linear algebra</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Case-Binning-data"><span class="nav-text">Case: Binning data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Case-counting-occurrence"><span class="nav-text">Case: counting occurrence</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Case-weighted-quantile"><span class="nav-text">Case: weighted quantile</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Case-Random-Walk"><span class="nav-text">Case: Random Walk</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Method-1"><span class="nav-text">Method 1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Method-2"><span class="nav-text">Method 2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pandas"><span class="nav-text">Pandas</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Series"><span class="nav-text">Series</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Combine-two-series-into-a-dataframe"><span class="nav-text">Combine two series into a dataframe</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#isnull-amp-notnull"><span class="nav-text">isnull() & notnull()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#indexing"><span class="nav-text">indexing</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#element-wise-operations"><span class="nav-text">element-wise operations</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DataFrame"><span class="nav-text">DataFrame</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Read-index-column-from-csv"><span class="nav-text">Read index column from csv</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Convert-DataFrame-to-Narray-preserving-index"><span class="nav-text">Convert DataFrame to Narray preserving index</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Blank-data-frame"><span class="nav-text">Blank data frame</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Access-sort-values"><span class="nav-text">Access sort_values</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Replacing-values"><span class="nav-text">Replacing values</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Reverse-the-row-order"><span class="nav-text">Reverse the row order</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Get-dummy-variables"><span class="nav-text">Get dummy variables</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Pandas-indexing"><span class="nav-text">Pandas indexing</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#with-Series"><span class="nav-text">with Series</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Rearrange-columns"><span class="nav-text">Rearrange columns</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Keep-slice-columns"><span class="nav-text">Keep/slice columns</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Pandas-conditional-indexing"><span class="nav-text">Pandas conditional indexing</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Rename-columns"><span class="nav-text">Rename columns</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Lowercase-columns"><span class="nav-text">Lowercase columns</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Drop-names-with-prefix"><span class="nav-text">Drop names with prefix</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DataFrame-math"><span class="nav-text">DataFrame math</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Delete-np-nan"><span class="nav-text">Delete np.nan</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Delete-a-column"><span class="nav-text">Delete a column</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#del"><span class="nav-text">del</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#drop"><span class="nav-text">drop()</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Nested-dict-inputs"><span class="nav-text">Nested dict inputs</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Subset-by-rows"><span class="nav-text">Subset by rows</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#name-amp-value-attributes"><span class="nav-text">name & value attributes</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Index-immutable"><span class="nav-text">Index immutable</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Index-as-a-set"><span class="nav-text">Index as a set</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#reindex"><span class="nav-text">reindex</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#set-index-amp-reset-index"><span class="nav-text">set_index & reset_index</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Interpolation"><span class="nav-text">Interpolation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Apply-a-function"><span class="nav-text">Apply a function</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#apply-attribute-of-Series"><span class="nav-text">apply: attribute of Series</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#apply-on-multiple-columns"><span class="nav-text">apply on multiple columns</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#apply-multiple-functions"><span class="nav-text">apply : multiple functions</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#apply-with-two-arguments"><span class="nav-text">apply with two arguments</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Case-optimization-with-apply"><span class="nav-text">Case: optimization with apply()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#applymap-attribute-of-DataFrame"><span class="nav-text">applymap : attribute of DataFrame</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Getting-the-common-rows-of-two-columns"><span class="nav-text">Getting the common rows of two columns</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Sorting-1"><span class="nav-text">Sorting</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#sort-index"><span class="nav-text">sort_index</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sort-values"><span class="nav-text">sort_values</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ranking"><span class="nav-text">ranking</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#reindexing-after-sorting"><span class="nav-text">reindexing after sorting</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Duplicate-indexes"><span class="nav-text">Duplicate indexes</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Functions-1"><span class="nav-text">Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#describe-amp-dtypes"><span class="nav-text">describe() & dtypes</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#locate-maximum"><span class="nav-text">locate maximum</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#shift"><span class="nav-text">shift</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Case-study-stock-markets"><span class="nav-text">Case study: stock markets</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Yahoo-finance"><span class="nav-text">Yahoo finance</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Google-finance"><span class="nav-text">Google finance</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Subsetting"><span class="nav-text">Subsetting</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Case-study-histogram"><span class="nav-text">Case study: histogram</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Case-study-histogram-1"><span class="nav-text">Case study: histogram</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Extracting-digits-from-string"><span class="nav-text">Extracting digits from string</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Missing-data"><span class="nav-text">Missing data</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Detecting-NaN"><span class="nav-text">Detecting NaN</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Fill-missing-values"><span class="nav-text">Fill missing values</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Drop-NaN-by-counting"><span class="nav-text">Drop NaN by counting</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Drop-NaN-by-layers"><span class="nav-text">Drop NaN by layers</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Replace-NaN"><span class="nav-text">Replace NaN</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Replacing-NaN-with-counterparts"><span class="nav-text">Replacing NaN with counterparts</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Fill-in-limited-scope"><span class="nav-text">Fill in limited scope</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Fill-with-mean"><span class="nav-text">Fill with mean()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Replace-with-other-values"><span class="nav-text">Replace with other values</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Convert-to-numeric"><span class="nav-text">Convert to numeric</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Hierarchical-indexing"><span class="nav-text">Hierarchical indexing</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#stack-amp-unstack"><span class="nav-text">stack() & unstack()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#MultiIndex"><span class="nav-text">MultiIndex</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#levels-reordering"><span class="nav-text">levels reordering</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Case-study-panel-data"><span class="nav-text">Case study: panel data</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Counting-sort-values"><span class="nav-text">Counting sort_values</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Plot"><span class="nav-text">Plot</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Clustered-stacked-bar-character"><span class="nav-text">Clustered, stacked bar character</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Broken-axis-plots"><span class="nav-text">Broken axis plots</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#plt-subplots-vs-fig-subplots-adjust"><span class="nav-text">plt.subplots vs fig.subplots_adjust</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#XKCD-plot"><span class="nav-text">XKCD plot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Plot-“The-Economist”-type-graphs"><span class="nav-text">Plot “The Economist”-type graphs</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optimization"><span class="nav-text">Optimization</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python-OOP"><span class="nav-text">Python OOP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Applications-of-Python"><span class="nav-text">Applications of Python</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Machine-learning"><span class="nav-text">Machine learning</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-mining"><span class="nav-text">Data mining</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL"><span class="nav-text">MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tableau"><span class="nav-text">Tableau</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#template"><span class="nav-text">template</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Regular-expressions"><span class="nav-text">Regular expressions</span></a></li></ol></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/note/" class="mobile-nav-link">Home</a>
  
    <a href="/note/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/note/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/note/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/note/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2018 Data Science All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              Unique vistor<span id="busuanzi_value_site_uv"></span>people  
              Page view<span id="busuanzi_value_site_pv"></span>times
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/note/fancybox/jquery.fancybox.css">
  <script src="/note/fancybox/jquery.fancybox.pack.js"></script>


<script src="/note/js/script.js"></script>
<script src="/note/js/bootstrap.js"></script>
<script src="/note/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
